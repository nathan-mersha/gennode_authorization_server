<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:51,&quot;tests&quot;:115,&quot;passes&quot;:115,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-11-07T07:54:55.569Z&quot;,&quot;end&quot;:&quot;2019-11-07T07:55:00.795Z&quot;,&quot;duration&quot;:5226,&quot;testsRegistered&quot;:115,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;215a8259-8549-40cd-843d-b309779c4ede&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f48afbb2-1e03-4e27-9d3c-a31a1c5bac53&quot;,&quot;title&quot;:&quot;Token&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f739c791-cd34-4134-a1c9-b374d8d8decf&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to create token (Validation error)&quot;,&quot;fullTitle&quot;:&quot;Token Create Should fail to create token (Validation error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.validationError,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;72c22d61-099e-45d0-ab72-35f1ec704dbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create token&quot;,&quot;fullTitle&quot;:&quot;Token Create Should successfully create token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isToken(body, true);\n    dummyData.token.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c73fcc7c-6294-4c87-8e9c-a58d7a066aa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72c22d61-099e-45d0-ab72-35f1ec704dbb&quot;,&quot;c73fcc7c-6294-4c87-8e9c-a58d7a066aa7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:129,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;f1e0fcab-0838-4392-bce6-2a5c01f19f3c&quot;,&quot;title&quot;:&quot;Validate&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;Generating dummy data for tests.\&quot;);\nasync.waterfall([\n    requestToken,\n    updateAnyRole, // route to be accessed by all\n    updateAnyACM,\n    createUserRole,\n    createUserACM\n],function () {\n    done();\n});\n/**\n * @name            - Request token\n * @description     - Requests a new token by userId.\n * @param callback  - Callback function (error)\n */\nfunction requestToken(callback) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) {\n        validateToken.allowedToBeAccessedByAny.token = res.body.token;\n        validateToken.allowedToBeAccessedByNone.token = res.body.token;\n        validateToken.allowedToPerformPUTByAny.token = res.body.token;\n        validateToken.deniedToPerformDELETEByAny.token = res.body.token;\n        validateToken.allowedToPerformPUTByUser.token = res.body.token;\n        validateToken.allowedToPerformPUTByUserOnUserRoute.token = res.body.token;\n        validateToken.allowedToPerformMethodDeniedRoute.token = res.body.token;\n        validateToken.deniedMethodOnObject.token = res.body.token;\n        validateToken.allowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessMethodButRoute.token = res.body.token;\n        callback(null);\n    });\n}\n/**\n * @name            - Update any role\n * @description     - Updates role type &#x27;any&#x27; to have access for the routes accessed by all\n * @param callback  - Callback function (error)\n */\nfunction updateAnyRole(callback) {\n    let updateData  = {accessRoutes : [\n            { route : route.accessedByAll, method : \&quot;POST\&quot;},\n            { route : route.accessedByAll, method : \&quot;PUT\&quot;},\n            { route : route.accessedByAll, method : \&quot;GET\&quot;}\n            ]};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Update any acm\n * @description     - Updates any acm role\n * @param callback  - Callback function (error)\n */\nfunction updateAnyACM(callback) {\n    let updateData = {\n        accessControl : {\n            read    : [performPUTOnObjectByAny],\n            update  : [performPUTOnObjectByAny]\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Create user role\n * @description     - Create sample role with test user\n * @param callback  - Callback function (error)\n */\nfunction createUserRole(callback) {\n    let sampleRole = {\n        name            : \&quot;Sample Privilege\&quot;,\n        description     : \&quot;Sample description for the privilege\&quot;,\n        members         : [userId],\n        accessRoutes    : [\n            {route : route.accessedByUser, method : \&quot;PUT\&quot;}\n        ]\n    };\n    sendRequest(url.role.create(),&#x27;post&#x27;,sampleRole,201,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}\n/**\n * @name            - Create user acm\n * @description     - Creates custom user acm data.\n * @param callback  - Callback function (error)\n */\nfunction createUserACM(callback) {\n    let userACMData = {\n        subject : userId,\n        accessControl : {\n            update : [performPUTOnObjectByUser]\n        }\n    };\n    sendRequest(url.acm.create(),&#x27;post&#x27;,userACMData,200,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;caccd4de-dcc8-439a-a3dd-09ff7dc63949&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Roll back\nasync.waterfall([\n    removedAnyRoleUpdate,\n    removeAnyACMUpdate,\n    removeUserRole,\n    removeUserACM\n],function () {\n    console.log(\&quot;Rollback completed.\&quot;)\n});\nfunction removedAnyRoleUpdate(cb) {\n    let updateData  = {accessRoutes : []};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeAnyACMUpdate(cb) {\n    let updateData = {\n        accessControl : {\n            read    : [],\n            update  : []\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeUserRole(cb) {\n    let userRoleQuery = \&quot;name=Sample Privilege\&quot;;\n    sendRequest(url.role.remove(userRoleQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}\nfunction removeUserACM(cb) {\n    let userACMQuery = `subject=${userId}`;\n    sendRequest(url.acm.remove(userACMQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3ca8a1ce-7533-4c4f-8ec7-71c9599cafe3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to grant access (Body missing required fields)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Body missing required fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode); // Validation error\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;96c6cb35-a503-4134-85ff-e82a3cf93913&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToBeAccessedByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;336fd74e-0529-4218-8055-189d3aac322f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (Token has expired)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Token has expired)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2041,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let tokenExpirationTimeCopy = process.env.TOKEN_EXPIRATION_TIME;\nprocess.env.TOKEN_EXPIRATION_TIME = \&quot;1000\&quot;; // Change token expiration time to one second.\nasync.waterfall([\n    createAToken,\n    validateExpToken,\n    rollBackExpirationTime\n],function () {\n    done();\n});\n/**\n * @name            - Create token\n * @description     - Creates a new token for user by 1sec expiration time\n * @param cb        - Callback function (error, response)\n */\nfunction createAToken(cb) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) { // Create token\n        cb(null, res);\n    });\n}\n/**\n * @name            - Validate Exp token\n * @description     - Validation an expired token after 2sec (1 sec safe threshold)\n * @param res       - Token data response object\n * @param cb        - Callback function (error)\n */\nfunction validateExpToken(res, cb) {\n    validateToken.toExpireAfterOneSec.token = res.body.token;\n    setTimeout(function () {\n        sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.toExpireAfterOneSec,401,function (err,res) {\n            let body = res.body;\n            expect(body.message).to.equal(message.ACCESS_DENIED);\n            cb(null);\n        });\n    },2000);\n}\n/**\n * @name            - Roll back expiration time\n * @description     - Rolls back expiration time to whatever was set on the process env before the test.\n * @param cb        - Callback function (error)\n */\nfunction rollBackExpirationTime(cb) {\n    process.env.TOKEN_EXPIRATION_TIME = tokenExpirationTimeCopy;\n    cb(null);\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c64061db-2639-4302-a669-57cfd52e0e92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;29782613-07d4-45d6-9841-8ac4a2434f54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedToPerformDELETEByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;25777ac1-50f6-4d9b-8a3c-64978fd67ac9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUser,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;584d20ae-7e37-4950-87a8-2cab1067db3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUserOnUserRoute,200,function (err,res) {\n                        let body = res.body;\n                        expect(body.message).to.equal(message.ACCESS_GRANTED);\n                        done();\n                    });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9e6a0ce4-4231-4607-a827-5b123df886e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToAccessRoute,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;813e7450-3d03-4d6a-b3a4-057e34690c4d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessRoute,400,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1b7c12df-cd03-48b1-99ff-ebb2f33757ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessMethodButRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fefa9845-c1df-4391-810c-4667e7aaedcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformMethodDeniedRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2407d91d-3784-4a49-909d-2121885387b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedMethodOnObject,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;65ee3666-9e09-4e58-9854-5f522e879578&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96c6cb35-a503-4134-85ff-e82a3cf93913&quot;,&quot;336fd74e-0529-4218-8055-189d3aac322f&quot;,&quot;c64061db-2639-4302-a669-57cfd52e0e92&quot;,&quot;29782613-07d4-45d6-9841-8ac4a2434f54&quot;,&quot;25777ac1-50f6-4d9b-8a3c-64978fd67ac9&quot;,&quot;584d20ae-7e37-4950-87a8-2cab1067db3d&quot;,&quot;9e6a0ce4-4231-4607-a827-5b123df886e5&quot;,&quot;813e7450-3d03-4d6a-b3a4-057e34690c4d&quot;,&quot;1b7c12df-cd03-48b1-99ff-ebb2f33757ef&quot;,&quot;fefa9845-c1df-4391-810c-4667e7aaedcb&quot;,&quot;2407d91d-3784-4a49-909d-2121885387b3&quot;,&quot;65ee3666-9e09-4e58-9854-5f522e879578&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2274,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;03cbf9aa-019e-4625-b94a-3e840ef9c03d&quot;,&quot;title&quot;:&quot;Service&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3973abf5-8883-4b19-adab-ee8d29ee0650&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create service&quot;,&quot;fullTitle&quot;:&quot;Service Create Should successfully create service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    dummyData.service.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4873901b-68e1-450b-83ef-87a81614b38c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method and route fields missing)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method and route fields missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c25c5052-0f52-46f4-9d6c-dba36d87dd77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method is not http method)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method is not http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;52bd9d8d-2636-4997-9cfd-982660264409&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4873901b-68e1-450b-83ef-87a81614b38c&quot;,&quot;c25c5052-0f52-46f4-9d6c-dba36d87dd77&quot;,&quot;52bd9d8d-2636-4997-9cfd-982660264409&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5e0123f6-b4ae-419f-8e5b-a283d272e739&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service data (public)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;156d2bab-402a-482a-8ed8-1218b93722ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve service data (private)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPrivate(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;adc9e7d0-56c9-4e18-8de0-35aea45a4d79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve service data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Service Find Should fail to retrieve service data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8b27bf49-125f-4ff5-970f-46ea1055feb0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;156d2bab-402a-482a-8ed8-1218b93722ed&quot;,&quot;adc9e7d0-56c9-4e18-8de0-35aea45a4d79&quot;,&quot;8b27bf49-125f-4ff5-970f-46ea1055feb0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;19074e57-8b14-4e02-89df-c9ec219a90c0&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service paginated data&quot;,&quot;fullTitle&quot;:&quot;Service Find paginated Should successfully retrieve service paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1c421872-18a1-49f5-9d18-224153312485&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c421872-18a1-49f5-9d18-224153312485&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d4a15a5-9e2f-4e5a-87a2-c65e833d5908&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Service Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3d2a5d8e-23e1-4237-9481-c9dbac046b7f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d2a5d8e-23e1-4237-9481-c9dbac046b7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a31afec-bfae-4649-b8aa-226a9d2f4b8c&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    serviceData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8f33a773-d72e-4c03-ac75-07f15e0d5f12&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;13d86ae3-b750-4e47-8b80-80d7210f3f71&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update service data&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully update service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f3f62fe3-1adf-4e3f-9a68-0ff706e2ccbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb5441a8-8104-4b26-b439-0a9f676a82f5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update service data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update service data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;996919cf-b579-4ca9-bcb4-9729917d1269&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(... update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ab0faa53-461f-4925-a535-f54aa98184f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(...update.success.data);\n    let responseArray = body.routes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a68b2fe9-b077-41c0-9764-69be8ec7a793&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;04e7df1e-aa0d-4312-9141-d91c06a88512&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a74922fe-e506-429a-96bb-e19a75018d04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aa45fefd-8efe-419c-8e83-d9698d9c9300&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;be20f6ba-3e84-49b0-b839-6672483c4597&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ddaf7ecf-cad3-4159-88a3-9db387c678f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f3f62fe3-1adf-4e3f-9a68-0ff706e2ccbb&quot;,&quot;cb5441a8-8104-4b26-b439-0a9f676a82f5&quot;,&quot;996919cf-b579-4ca9-bcb4-9729917d1269&quot;,&quot;ab0faa53-461f-4925-a535-f54aa98184f9&quot;,&quot;a68b2fe9-b077-41c0-9764-69be8ec7a793&quot;,&quot;04e7df1e-aa0d-4312-9141-d91c06a88512&quot;,&quot;a74922fe-e506-429a-96bb-e19a75018d04&quot;,&quot;aa45fefd-8efe-419c-8e83-d9698d9c9300&quot;,&quot;be20f6ba-3e84-49b0-b839-6672483c4597&quot;,&quot;ddaf7ecf-cad3-4159-88a3-9db387c678f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;145142b2-4e01-4b42-b55c-a421eea59206&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove service data&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should successfully remove service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8ccd7d84-ed0a-4bd4-9a11-19f322d2feff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove service data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should fail to remove service data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3f9b420d-6f26-4b3c-9391-cf88f37f3f2f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ccd7d84-ed0a-4bd4-9a11-19f322d2feff&quot;,&quot;3f9b420d-6f26-4b3c-9391-cf88f37f3f2f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2d62d8f4-cd93-4cbb-a0bb-560139bf3fae&quot;,&quot;title&quot;:&quot;User&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cd597b4a-baee-4b15-8cbd-b920fe3aff26&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create user&quot;,&quot;fullTitle&quot;:&quot;User Create Should successfully create user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUser(body, true);\n    dummyData.user.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ad0e5d71-da26-4a29-acc8-a85187686401&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create user (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;User Create Should fail to create user (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3c78d703-45c9-4e0b-bc69-8b5134348dbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad0e5d71-da26-4a29-acc8-a85187686401&quot;,&quot;3c78d703-45c9-4e0b-bc69-8b5134348dbf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f17df457-fcd4-4af1-b1b5-22846708b9d7&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5a6786d1-5f29-42ea-b90d-41f158ee3fa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve user data (private)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPrivate(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f98ce5e8-b6e0-46a3-af03-7cc375a30733&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve user data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;User Find Should fail to retrieve user data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;55707381-ba92-4077-bbb8-fa89eb96a490&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a6786d1-5f29-42ea-b90d-41f158ee3fa3&quot;,&quot;f98ce5e8-b6e0-46a3-af03-7cc375a30733&quot;,&quot;55707381-ba92-4077-bbb8-fa89eb96a490&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef5cf614-9dc7-4a7f-8c0b-1444ec683f9a&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user paginated data&quot;,&quot;fullTitle&quot;:&quot;User Find paginated Should successfully retrieve user paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;04b6b110-c9f9-4546-8852-a230a2444973&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04b6b110-c9f9-4546-8852-a230a2444973&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9b3b3f5a-d5b7-4883-9761-437b5a71f8af&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;User Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;59b57a04-2664-4ef5-bfad-db805710f6d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59b57a04-2664-4ef5-bfad-db805710f6d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0624987b-6dfb-4e22-af84-adc3cea9f4e2&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update user data&quot;,&quot;fullTitle&quot;:&quot;User Update Should successfully update user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;13b945f7-2575-427c-b04a-3cf2da015ff2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;955fa96c-c6d8-48e7-9306-bf2be402031f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update user data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update user data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f42cc0ec-1277-4f64-a9df-1305678d202a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13b945f7-2575-427c-b04a-3cf2da015ff2&quot;,&quot;955fa96c-c6d8-48e7-9306-bf2be402031f&quot;,&quot;f42cc0ec-1277-4f64-a9df-1305678d202a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f133fc37-f868-4005-a0ff-5490d22f7b61&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove user data&quot;,&quot;fullTitle&quot;:&quot;User Remove Should successfully remove user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2ebc47e3-c9d4-437c-bd3f-8550f35097a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove user data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Remove Should fail to remove user data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;99f8dc1f-0137-43f6-b309-7a3f5b95ba9d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ebc47e3-c9d4-437c-bd3f-8550f35097a2&quot;,&quot;99f8dc1f-0137-43f6-b309-7a3f5b95ba9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f7f7bcb-1ff9-4575-b391-888811fb6e9a&quot;,&quot;title&quot;:&quot;Role&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;92972456-1cd0-4e07-96df-fa15c1aac022&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create role&quot;,&quot;fullTitle&quot;:&quot;Role Create Should successfully create role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    dummyData.role.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7893f2d6-dbec-4693-b8a0-0d7d7b995897&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create role (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create role (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;49627328-1016-4a4b-9475-01d5fa0a4763&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create route (Unknown Http method)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create route (Unknown Http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.invalidMethod,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1b0629c3-0c4f-4165-993a-86b92d2bde0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7893f2d6-dbec-4693-b8a0-0d7d7b995897&quot;,&quot;49627328-1016-4a4b-9475-01d5fa0a4763&quot;,&quot;1b0629c3-0c4f-4165-993a-86b92d2bde0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9ea9624-1057-4e42-8a32-b4bff80d4ea3&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role data (public)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;89c988bc-0039-4cf3-9176-75bc27c6962c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve role data (private)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPrivate(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e61d885e-1d14-44fd-9318-d69d7621f75b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve role data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Role Find Should fail to retrieve role data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f3a5052d-8a02-4dd9-bc83-bdec308f2487&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89c988bc-0039-4cf3-9176-75bc27c6962c&quot;,&quot;e61d885e-1d14-44fd-9318-d69d7621f75b&quot;,&quot;f3a5052d-8a02-4dd9-bc83-bdec308f2487&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;399e183b-7040-4a0b-9e05-854fa4ec74b0&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role paginated data&quot;,&quot;fullTitle&quot;:&quot;Role Find paginated Should successfully retrieve role paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;72c5e064-1397-44b6-9b06-b128699c4d93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72c5e064-1397-44b6-9b06-b128699c4d93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b7f0962-a21b-4555-8d03-496417517cfe&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Role Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;73731148-95c9-4519-ad58-38603ccb825f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73731148-95c9-4519-ad58-38603ccb825f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37a3920a-5df7-4690-a376-869f3934b523&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0882ee3c-85b3-48d5-8392-73bddaea753b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;79deb49e-d5a5-4e2d-ba6a-2046ad0c7ee6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update role data&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully update role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c9b365aa-2c8f-4559-a0b7-462c76ca3d97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f27b0ebf-f1cb-48a9-91c6-117ffb2c2e0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1797fa78-8eab-41fd-ad2c-a028103251f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;Pushing items to target, role : -------------------------------------------------\&quot;);\nlet query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nconsole.log(\&quot;Url : \&quot;, url.role.update(query));\nconsole.log(\&quot;Body : \&quot;, JSON.stringify(update.success.data));\nconsole.log(\&quot;Pusing items to target ended -----------------------------------------\&quot;);\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1b3fc764-58dc-4955-a305-6b451f952f78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    let responseArray = body.accessRoutes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;376fddd5-2afc-47e7-8a78-4cc30436e25a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f4f248a1-2fd0-4d0a-8e0c-a6b82b55709f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2a1da703-e7a0-46f6-b966-1f1d4b79b96f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;11c51955-7672-4471-b01f-48c72f1468f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6456c809-e72d-42c9-8e6b-872c9b1d5367&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0df46c73-2e7c-422e-a0bb-ee1f57a80726&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9b365aa-2c8f-4559-a0b7-462c76ca3d97&quot;,&quot;f27b0ebf-f1cb-48a9-91c6-117ffb2c2e0f&quot;,&quot;1797fa78-8eab-41fd-ad2c-a028103251f6&quot;,&quot;1b3fc764-58dc-4955-a305-6b451f952f78&quot;,&quot;376fddd5-2afc-47e7-8a78-4cc30436e25a&quot;,&quot;f4f248a1-2fd0-4d0a-8e0c-a6b82b55709f&quot;,&quot;2a1da703-e7a0-46f6-b966-1f1d4b79b96f&quot;,&quot;11c51955-7672-4471-b01f-48c72f1468f0&quot;,&quot;6456c809-e72d-42c9-8e6b-872c9b1d5367&quot;,&quot;0df46c73-2e7c-422e-a0bb-ee1f57a80726&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:114,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;5f02b051-cd53-49d8-a05a-e7429448404d&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove role data&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should successfully remove role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;14158b7c-3e1a-46dc-a5ba-dfe1de86cc06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should fail to remove role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f3745015-560a-4c38-a2a2-f9676973317f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14158b7c-3e1a-46dc-a5ba-dfe1de86cc06&quot;,&quot;f3745015-560a-4c38-a2a2-f9676973317f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;407e7210-f516-483b-8708-341d3389af0d&quot;,&quot;title&quot;:&quot;Acm&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;12842dca-e5e3-4a37-acff-703b8da794c7&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create acm&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    dummyData.acm.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0cba5726-61e2-4123-a2e0-1171a2789518&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create acm (By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm (By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.successByObject,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true, \&quot;object\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f341c282-a200-4bac-89d6-1938c3e091fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4df3939c-4920-418f-acfa-1f8849010a33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing, By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing, By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a915cc58-7553-44fd-adac-ce1acfc69fa0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cba5726-61e2-4123-a2e0-1171a2789518&quot;,&quot;f341c282-a200-4bac-89d6-1938c3e091fa&quot;,&quot;4df3939c-4920-418f-acfa-1f8849010a33&quot;,&quot;a915cc58-7553-44fd-adac-ce1acfc69fa0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:73,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;624356a6-5017-4749-bc0b-9a51db043057&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm data (public)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9ca1e07d-9e6a-4eb4-bef1-7523e1448240&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve acm data (private)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPrivate(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;abd056a3-4a2f-4a77-b6d8-585bf764162d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39f71c2b-5020-47bc-bad4-2d18dbef68ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ca1e07d-9e6a-4eb4-bef1-7523e1448240&quot;,&quot;abd056a3-4a2f-4a77-b6d8-585bf764162d&quot;,&quot;39f71c2b-5020-47bc-bad4-2d18dbef68ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1d68a4b9-836b-4e29-bc8e-b13c434e9c11&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm paginated data&quot;,&quot;fullTitle&quot;:&quot;Acm Find paginated Should successfully retrieve acm paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b0fefbbc-3a2d-4fe0-b8d2-edc852b6e196&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0fefbbc-3a2d-4fe0-b8d2-edc852b6e196&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c2bf91dd-5fd5-40f2-896c-fc10a7921c5c&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Acm Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6796dd8b-b392-41d9-b2a9-d066ed430a84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6796dd8b-b392-41d9-b2a9-d066ed430a84&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9bc89369-fd4d-49e8-b1f9-488dfb99ed17&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    acmData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6e90558e-d30f-45a3-b65a-8bb80bea27ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e0e2a3ab-960d-4620-bd10-207dae4796bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully update acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.nModified).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;975cf54a-104a-4f94-93b6-6fb73967388b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d4ee902-241a-4035-98b0-98cb950a918b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;304160ac-f8e3-42c5-84f5-5eb3fd63d671&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1f4f8c3e-b171-4fdc-9e92-58533f376539&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    let responseArray = body.accessControl.read;\n    delete responseArray[responseArray.indexOf(update.success.data[0])];\n    delete responseArray[responseArray.indexOf(update.success.data[1])];\n    expect(responseArray).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2cb5fca6-845d-455c-8428-9dd1a70b039a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;16481ff5-32c8-45d7-adf1-17f9bdbb53c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39a92a51-e8b4-4f8d-9b16-a60a100949a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;244b2e74-a708-495b-8ad1-e6b3fe57db3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2eac247d-4cb4-44fa-91dc-71a53dec740f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;82f2c9b0-9070-45fc-bf11-0d913d912075&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;975cf54a-104a-4f94-93b6-6fb73967388b&quot;,&quot;8d4ee902-241a-4035-98b0-98cb950a918b&quot;,&quot;304160ac-f8e3-42c5-84f5-5eb3fd63d671&quot;,&quot;1f4f8c3e-b171-4fdc-9e92-58533f376539&quot;,&quot;2cb5fca6-845d-455c-8428-9dd1a70b039a&quot;,&quot;16481ff5-32c8-45d7-adf1-17f9bdbb53c1&quot;,&quot;39a92a51-e8b4-4f8d-9b16-a60a100949a3&quot;,&quot;244b2e74-a708-495b-8ad1-e6b3fe57db3c&quot;,&quot;2eac247d-4cb4-44fa-91dc-71a53dec740f&quot;,&quot;82f2c9b0-9070-45fc-bf11-0d913d912075&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:115,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81190bc7-6d87-4a25-b89d-399c819c3c95&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should successfully remove acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cb5e4681-c696-4791-9bf7-c8c96e8b6d14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove acm data (Query not provide)&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should fail to remove acm data (Query not provide)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;50387983-75f6-49c2-be59-241860320912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb5e4681-c696-4791-9bf7-c8c96e8b6d14&quot;,&quot;50387983-75f6-49c2-be59-241860320912&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7182ae22-d18a-4a5c-8695-dc4a42e6ce53&quot;,&quot;title&quot;:&quot;Admin&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6cf0f27b-dbdb-400f-bef1-03ab110311fc&quot;,&quot;title&quot;:&quot;SignUp&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully signup Admin&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should successfully signup Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAdmin(body, true);\n    dummyData.admin.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;77f7077f-db63-47a1-8afe-280d89edff63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (Validate error)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (Validate error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;15b449aa-e3c8-4926-a619-ed94dd07767c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (UserName exists)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (UserName exists)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Fails because the exact test have been done before.\nsendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.USERNAME_EXISTS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;60397946-c75e-46c7-94ad-8b63e5158be4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77f7077f-db63-47a1-8afe-280d89edff63&quot;,&quot;15b449aa-e3c8-4926-a619-ed94dd07767c&quot;,&quot;60397946-c75e-46c7-94ad-8b63e5158be4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:100,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be66ebc0-0285-487e-8d9e-91e9ec5ed4df&quot;,&quot;title&quot;:&quot;Login&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to login (Wrong credential)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Wrong credential)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.wrongCredential,401,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.UNAUTHORIZED_ACCESS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e1f8b99a-2f65-4296-af44-3cba0e8eeac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to login (Missing fields)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Missing fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;076b69e5-8fc8-4ec5-9e0a-adb65bf12d39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully login Admin&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should successfully login Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;token&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d2eeb5e-8b7a-4a9b-968b-8aea1f44f67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1f8b99a-2f65-4296-af44-3cba0e8eeac3&quot;,&quot;076b69e5-8fc8-4ec5-9e0a-adb65bf12d39&quot;,&quot;8d2eeb5e-8b7a-4a9b-968b-8aea1f44f67a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd357908-e889-4ef7-bc9f-eea4b3a4d7a7&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Admin Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d08c6a03-f851-45b8-8cfe-0b5979c44022&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d08c6a03-f851-45b8-8cfe-0b5979c44022&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48eaf82b-7673-4411-aa9b-f120bd7f1515&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should successfully retrieve admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.admin.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9d448d64-e08b-4a5e-be59-0c3eda9f57dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d10dc552-b8b2-4905-8a17-65be0b5d7e18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d448d64-e08b-4a5e-be59-0c3eda9f57dc&quot;,&quot;d10dc552-b8b2-4905-8a17-65be0b5d7e18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fbadf5dd-a26f-4647-b0c1-5bbd1f1e9e37&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d104bbd-8369-422a-a415-dcc9511f27a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d104bbd-8369-422a-a415-dcc9511f27a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86263900-6397-44b3-9a5d-d96808e8bc4b&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should successfully update admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0e3011a7-baa1-4424-9db6-cdc5a471763f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1160714-87bb-462c-9b8c-8a41b4f6a6f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update admin data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update admin data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c4a76664-12da-49ba-a38e-2a1f40fd5962&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e3011a7-baa1-4424-9db6-cdc5a471763f&quot;,&quot;f1160714-87bb-462c-9b8c-8a41b4f6a6f4&quot;,&quot;c4a76664-12da-49ba-a38e-2a1f40fd5962&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82196d52-09f6-4674-8ee8-120fe3918869&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should successfully remove admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ed126f0d-78d2-49c0-9aa7-678f009029a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove admin data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should fail to remove admin data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;81451e10-3015-4136-ad8c-b2f5bd190dcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed126f0d-78d2-49c0-9aa7-678f009029a2&quot;,&quot;81451e10-3015-4136-ad8c-b2f5bd190dcf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1850cef5-8608-4b58-9455-b5a94be6cd1b&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dc8c4866-ebf9-495f-a0de-4a96da39580b&quot;,&quot;title&quot;:&quot;Status&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve server&#x27;s overall status&quot;,&quot;fullTitle&quot;:&quot;Log Status Should successfully retrieve server&#x27;s overall status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.status(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;memoryUsage\&quot;, \&quot;cpuUsage\&quot;, \&quot;upTime\&quot;]);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;64f5cacc-79f7-4e7d-b556-e87b2f158860&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64f5cacc-79f7-4e7d-b556-e87b2f158860&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;886d5bc8-cf38-4113-be26-e7bd8dfdb7b8&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve log data&quot;,&quot;fullTitle&quot;:&quot;Log Find Should successfully retrieve log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.get(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;info\&quot;]);\n    expect(body.info).to.be.an(&#x27;array&#x27;);\n    expect(body.info).length.to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e40333f0-1312-4b45-b70b-94409f590801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e40333f0-1312-4b45-b70b-94409f590801&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81136892-6e89-40e6-a1cb-7cf3f6ac5e49&quot;,&quot;title&quot;:&quot;Flush&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully flush log data&quot;,&quot;fullTitle&quot;:&quot;Log Flush Should successfully flush log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.flush(),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;message\&quot;]);\n    expect(body.message).to.equal(\&quot;Logs flushed\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cdef03bb-af51-44f1-b29c-cdc525413e67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cdef03bb-af51-44f1-b29c-cdc525413e67&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;455e014e-158e-49b9-8787-934c8bb62b93&quot;,&quot;title&quot;:&quot;Schema&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0cd60a28-4101-42bd-9f8d-8a107613ea83&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Schema Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9285a4ac-72ef-4775-92a2-df8344eeb535&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9285a4ac-72ef-4775-92a2-df8344eeb535&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5712d41e-3f0b-4c47-a78b-6268b7b5024b&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;Schema Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.findPaginated(query),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    let sampleSchema = body.docs[0];\n    isSchema(sampleSchema);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a1a8a072-0e1c-4acc-9b89-942eae4b05e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a1a8a072-0e1c-4acc-9b89-942eae4b05e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8d28a46a-39b7-4136-bc9a-dd92dee61685&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Schema Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bc76d0bf-c00f-49ac-beed-30a2aef8fb61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc76d0bf-c00f-49ac-beed-30a2aef8fb61&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b4941e9-74d6-45af-805e-91639ff39dbb&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Schema Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;754f3cce-9052-4c03-893b-90561bfbad44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to update Schema (Schema does not exist)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Schema does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=noneExistent&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;38e6fa9a-6193-4269-b9f0-c84b1606a8de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Target not defined) &quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Target not defined) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;68ab9f05-1938-45bc-ab1c-f800b85e93e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Operation not defined)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Operation not defined)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dbe96dd2-ce4d-4d5b-a982-7af8ac634e97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully add a new role to a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully add a new role to a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    console.log(\&quot;Schema push response : \&quot;, JSON.stringify(res.body));\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;91ba58bc-c3cf-4b7a-a19d-726a532b541f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully remove a role from a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully remove a role from a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;pull\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.not.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5fab142d-38e6-4e9e-bd32-b8131def201e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38e6fa9a-6193-4269-b9f0-c84b1606a8de&quot;,&quot;68ab9f05-1938-45bc-ab1c-f800b85e93e5&quot;,&quot;dbe96dd2-ce4d-4d5b-a982-7af8ac634e97&quot;,&quot;91ba58bc-c3cf-4b7a-a19d-726a532b541f&quot;,&quot;5fab142d-38e6-4e9e-bd32-b8131def201e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b69cd63e-0c16-40e5-b611-312744041f06&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove Schema&quot;,&quot;fullTitle&quot;:&quot;Schema Remove Should successfully remove Schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ddd97618-4a1a-472f-a5e8-2070f91cd876&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ddd97618-4a1a-472f-a5e8-2070f91cd876&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c7a78e61-8bfd-4d38-8e6d-3b54b20ce779&quot;,&quot;title&quot;:&quot;Socket&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5a13eff8-afee-4ebc-bc05-7c542cf51002&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully receive streamed request logs.&quot;,&quot;fullTitle&quot;:&quot;Socket Log Should successfully receive streamed request logs.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1048,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let socketURL = `http://0.0.0.0:${process.env.HTTP_PORT}`;\nlet options = {\n    transports: [&#x27;websocket&#x27;],\n    &#x27;force new connection&#x27;: true\n};\n(()=&gt;{\n    let execRequests = [];\n    for(let i=0; i&lt;1; i++){\n        execRequests.push(function (callback) {\n            setTimeout(function () {\n                let deniedMethodOnObject = {\n                    service     : \&quot;Service A\&quot;,\n                        ip          : \&quot;172.16.1.41\&quot;,\n                        params      : null,\n                        path        : \&quot;http://sample/route\&quot;,\n                        query       : null,\n                        secure      : true,\n                        xhr         : false,\n                        route       : \&quot;http://sample/route\&quot;,\n                        method      : \&quot;PUT\&quot;,\n                        body        : {sampleKey : \&quot;sampleVal\&quot;},\n                        objectId    : \&quot;5cee7a0456f44a4e65b35532\&quot;,\n                        token       : \&quot;wrong_token\&quot;\n                };\n                sendRequest(url.token.validate(),&#x27;post&#x27;,deniedMethodOnObject,200,function () {\n                    callback(null);\n                });\n            },500)\n        })\n    }\n    async.waterfall(execRequests);\n})();\nlet client = socketClient.connect(socketURL, options);\nclient.on(&#x27;logs&#x27;, function(data){\n    if(data){done();}\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;eed4305e-04fd-40d4-8135-9402425566ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eed4305e-04fd-40d4-8135-9402425566ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1048,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;report&quot;,&quot;reportTitle&quot;:&quot;hisab_authorization_service&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.json&quot;,&quot;htmlFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>