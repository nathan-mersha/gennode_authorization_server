<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:51,&quot;tests&quot;:115,&quot;passes&quot;:115,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-10-25T13:41:02.400Z&quot;,&quot;end&quot;:&quot;2019-10-25T13:41:08.808Z&quot;,&quot;duration&quot;:6408,&quot;testsRegistered&quot;:115,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;10f45ee2-ffb9-45c8-8f5e-3dc18e0e94cc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8d882538-dbff-4cca-87f0-faa0e77ed3a1&quot;,&quot;title&quot;:&quot;Token&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aedc9e5a-d708-457b-8d80-32dde1b113ef&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to create token (Validation error)&quot;,&quot;fullTitle&quot;:&quot;Token Create Should fail to create token (Validation error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:387,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.validationError,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4bc117d7-d2a0-4f34-ab69-eb6ae2df919c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create token&quot;,&quot;fullTitle&quot;:&quot;Token Create Should successfully create token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:233,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isToken(body, true);\n    dummyData.token.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cadb691a-1dd8-4710-abfa-b902f910e41b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4bc117d7-d2a0-4f34-ab69-eb6ae2df919c&quot;,&quot;cadb691a-1dd8-4710-abfa-b902f910e41b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:620,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;50a8122a-3e8a-48fe-bd70-fa0269f2238d&quot;,&quot;title&quot;:&quot;Validate&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:370,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;Generating dummy data for tests.\&quot;);\nasync.waterfall([\n    requestToken,\n    updateAnyRole, // route to be accessed by all\n    updateAnyACM,\n    createUserRole,\n    createUserACM\n],function () {\n    done();\n});\n/**\n * @name            - Request token\n * @description     - Requests a new token by userId.\n * @param callback  - Callback function (error)\n */\nfunction requestToken(callback) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) {\n        validateToken.allowedToBeAccessedByAny.token = res.body.token;\n        validateToken.allowedToBeAccessedByNone.token = res.body.token;\n        validateToken.allowedToPerformPUTByAny.token = res.body.token;\n        validateToken.deniedToPerformDELETEByAny.token = res.body.token;\n        validateToken.allowedToPerformPUTByUser.token = res.body.token;\n        validateToken.allowedToPerformPUTByUserOnUserRoute.token = res.body.token;\n        validateToken.allowedToPerformMethodDeniedRoute.token = res.body.token;\n        validateToken.deniedMethodOnObject.token = res.body.token;\n        validateToken.allowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessMethodButRoute.token = res.body.token;\n        callback(null);\n    });\n}\n/**\n * @name            - Update any role\n * @description     - Updates role type &#x27;any&#x27; to have access for the routes accessed by all\n * @param callback  - Callback function (error)\n */\nfunction updateAnyRole(callback) {\n    let updateData  = {accessRoutes : [\n            { route : route.accessedByAll, method : \&quot;POST\&quot;},\n            { route : route.accessedByAll, method : \&quot;PUT\&quot;},\n            { route : route.accessedByAll, method : \&quot;GET\&quot;}\n            ]};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Update any acm\n * @description     - Updates any acm role\n * @param callback  - Callback function (error)\n */\nfunction updateAnyACM(callback) {\n    let updateData = {\n        accessControl : {\n            read    : [performPUTOnObjectByAny],\n            update  : [performPUTOnObjectByAny]\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Create user role\n * @description     - Create sample role with test user\n * @param callback  - Callback function (error)\n */\nfunction createUserRole(callback) {\n    let sampleRole = {\n        name            : \&quot;Sample Privilege\&quot;,\n        description     : \&quot;Sample description for the privilege\&quot;,\n        members         : [userId],\n        accessRoutes    : [\n            {route : route.accessedByUser, method : \&quot;PUT\&quot;}\n        ]\n    };\n    sendRequest(url.role.create(),&#x27;post&#x27;,sampleRole,201,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}\n/**\n * @name            - Create user acm\n * @description     - Creates custom user acm data.\n * @param callback  - Callback function (error)\n */\nfunction createUserACM(callback) {\n    let userACMData = {\n        subject : userId,\n        accessControl : {\n            update : [performPUTOnObjectByUser]\n        }\n    };\n    sendRequest(url.acm.create(),&#x27;post&#x27;,userACMData,200,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;715ec00a-7398-4a76-9a03-2ce50b750227&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Roll back\nasync.waterfall([\n    removedAnyRoleUpdate,\n    removeAnyACMUpdate,\n    removeUserRole,\n    removeUserACM\n],function () {\n    console.log(\&quot;Rollback completed.\&quot;)\n});\nfunction removedAnyRoleUpdate(cb) {\n    let updateData  = {accessRoutes : []};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeAnyACMUpdate(cb) {\n    let updateData = {\n        accessControl : {\n            read    : [],\n            update  : []\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeUserRole(cb) {\n    let userRoleQuery = \&quot;name=Sample Privilege\&quot;;\n    sendRequest(url.role.remove(userRoleQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}\nfunction removeUserACM(cb) {\n    let userACMQuery = `subject=${userId}`;\n    sendRequest(url.acm.remove(userACMQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;877efb05-d9f0-4e35-86d7-8f5d190ec42f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to grant access (Body missing required fields)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Body missing required fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode); // Validation error\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7fc0cc37-5ef5-4a72-92f0-3827ad0f14d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToBeAccessedByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9eeab1e6-bea5-479b-a390-abf3225431b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (Token has expired)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Token has expired)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2075,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let tokenExpirationTimeCopy = process.env.TOKEN_EXPIRATION_TIME;\nprocess.env.TOKEN_EXPIRATION_TIME = \&quot;1000\&quot;; // Change token expiration time to one second.\nasync.waterfall([\n    createAToken,\n    validateExpToken,\n    rollBackExpirationTime\n],function () {\n    done();\n});\n/**\n * @name            - Create token\n * @description     - Creates a new token for user by 1sec expiration time\n * @param cb        - Callback function (error, response)\n */\nfunction createAToken(cb) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) { // Create token\n        cb(null, res);\n    });\n}\n/**\n * @name            - Validate Exp token\n * @description     - Validation an expired token after 2sec (1 sec safe threshold)\n * @param res       - Token data response object\n * @param cb        - Callback function (error)\n */\nfunction validateExpToken(res, cb) {\n    validateToken.toExpireAfterOneSec.token = res.body.token;\n    setTimeout(function () {\n        sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.toExpireAfterOneSec,401,function (err,res) {\n            let body = res.body;\n            expect(body.message).to.equal(message.ACCESS_DENIED);\n            cb(null);\n        });\n    },2000);\n}\n/**\n * @name            - Roll back expiration time\n * @description     - Rolls back expiration time to whatever was set on the process env before the test.\n * @param cb        - Callback function (error)\n */\nfunction rollBackExpirationTime(cb) {\n    process.env.TOKEN_EXPIRATION_TIME = tokenExpirationTimeCopy;\n    cb(null);\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7f413891-a4f5-49af-891f-31b92922dacb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0fc406db-b6ee-4ad5-96a6-68d650b7e72e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedToPerformDELETEByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1044773-afd6-48c2-b1db-39a210c12cef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUser,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3b82af80-d4c6-477f-8f66-e2eb24b502a7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUserOnUserRoute,200,function (err,res) {\n                        let body = res.body;\n                        expect(body.message).to.equal(message.ACCESS_GRANTED);\n                        done();\n                    });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39caf330-8399-45e4-b11f-f622d0d77e7c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToAccessRoute,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e05daf8f-7a14-4a6b-8921-010e410fcbf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessRoute,400,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5c3c30e8-c5ef-47f5-bb65-45592c0a28ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessMethodButRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a544e05c-6bc5-471b-9af0-97b9ea419e6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformMethodDeniedRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2ffacb5d-d886-4057-be90-cc307b33d58c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedMethodOnObject,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aa0a3ba5-198e-4c42-a8ad-d1040d7efed6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7fc0cc37-5ef5-4a72-92f0-3827ad0f14d3&quot;,&quot;9eeab1e6-bea5-479b-a390-abf3225431b5&quot;,&quot;7f413891-a4f5-49af-891f-31b92922dacb&quot;,&quot;0fc406db-b6ee-4ad5-96a6-68d650b7e72e&quot;,&quot;f1044773-afd6-48c2-b1db-39a210c12cef&quot;,&quot;3b82af80-d4c6-477f-8f66-e2eb24b502a7&quot;,&quot;39caf330-8399-45e4-b11f-f622d0d77e7c&quot;,&quot;e05daf8f-7a14-4a6b-8921-010e410fcbf4&quot;,&quot;5c3c30e8-c5ef-47f5-bb65-45592c0a28ae&quot;,&quot;a544e05c-6bc5-471b-9af0-97b9ea419e6f&quot;,&quot;2ffacb5d-d886-4057-be90-cc307b33d58c&quot;,&quot;aa0a3ba5-198e-4c42-a8ad-d1040d7efed6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2446,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fe09f88b-532f-4649-b727-52a5f1d8ae89&quot;,&quot;title&quot;:&quot;Service&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c89ca387-f10f-48e5-965c-8055b86fe30e&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create service&quot;,&quot;fullTitle&quot;:&quot;Service Create Should successfully create service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    dummyData.service.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0e285b00-2ade-412a-bbb7-a2eaf25c99c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method and route fields missing)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method and route fields missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e992e14f-3053-4b4e-8135-a6d7108bf95a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method is not http method)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method is not http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;88f20c03-2675-4a11-918a-bb38fed9a48c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e285b00-2ade-412a-bbb7-a2eaf25c99c2&quot;,&quot;e992e14f-3053-4b4e-8135-a6d7108bf95a&quot;,&quot;88f20c03-2675-4a11-918a-bb38fed9a48c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e22f910b-8842-4b91-a8ff-2fcce7da844c&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service data (public)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0d7ee188-6396-469d-8f19-0c03a8dfea53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve service data (private)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPrivate(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e8822a0-7335-4d92-a27d-d8d7a32ced3c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve service data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Service Find Should fail to retrieve service data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c6b753ae-4aeb-4b5e-a9e0-898cd6d83934&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d7ee188-6396-469d-8f19-0c03a8dfea53&quot;,&quot;4e8822a0-7335-4d92-a27d-d8d7a32ced3c&quot;,&quot;c6b753ae-4aeb-4b5e-a9e0-898cd6d83934&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;71cdd024-e73f-4e45-9b06-f210c6c9feb8&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service paginated data&quot;,&quot;fullTitle&quot;:&quot;Service Find paginated Should successfully retrieve service paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3a5dd4db-0acb-44dc-8229-00499ed2a99a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a5dd4db-0acb-44dc-8229-00499ed2a99a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a3e05b2d-7867-4149-a3e9-c74af566461f&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Service Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;712c9b1f-37dd-4892-8926-f58ec2b93ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;712c9b1f-37dd-4892-8926-f58ec2b93ed1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a726fd8-31b9-4658-8c0a-c878b09eb572&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    serviceData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d902e8ff-1bd0-4895-8693-106dd2e12b1b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;18187b84-17dd-4732-874b-d4db3a194765&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update service data&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully update service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f2f61566-3734-44a7-9f6c-3451abab109f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee3055cf-268c-464c-84a7-3c1353964433&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update service data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update service data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a4b4f0bc-98c2-4b3a-9988-9b93057bf209&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(... update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b307fc78-6376-41a1-b343-4931706b3df7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(...update.success.data);\n    let responseArray = body.routes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cbba8aff-4566-406b-8525-20024a75a626&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3a234ace-e7b9-4839-a0e8-a9ef10913013&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;49105226-0112-455f-b280-c0e4a4d809a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e6f66421-7cc6-4349-b15a-cc559f1dc840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5dc4db3c-d6bc-4714-8522-f815ac87b7de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fe417b2a-cc0d-4483-ae57-380d9ee39277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2f61566-3734-44a7-9f6c-3451abab109f&quot;,&quot;ee3055cf-268c-464c-84a7-3c1353964433&quot;,&quot;a4b4f0bc-98c2-4b3a-9988-9b93057bf209&quot;,&quot;b307fc78-6376-41a1-b343-4931706b3df7&quot;,&quot;cbba8aff-4566-406b-8525-20024a75a626&quot;,&quot;3a234ace-e7b9-4839-a0e8-a9ef10913013&quot;,&quot;49105226-0112-455f-b280-c0e4a4d809a2&quot;,&quot;e6f66421-7cc6-4349-b15a-cc559f1dc840&quot;,&quot;5dc4db3c-d6bc-4714-8522-f815ac87b7de&quot;,&quot;fe417b2a-cc0d-4483-ae57-380d9ee39277&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:113,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9fcd7992-05c7-4fbd-aafe-4460254bfbf6&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove service data&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should successfully remove service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;95e1da7c-227b-4134-b256-17fc10d190d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove service data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should fail to remove service data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;eff88e73-9293-4eed-bdd7-97d721871680&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95e1da7c-227b-4134-b256-17fc10d190d2&quot;,&quot;eff88e73-9293-4eed-bdd7-97d721871680&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fc26b9a4-bbe2-4667-8cc7-570a250923e7&quot;,&quot;title&quot;:&quot;User&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dff13762-ee82-4fbc-8c6a-189b96786fef&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create user&quot;,&quot;fullTitle&quot;:&quot;User Create Should successfully create user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUser(body, true);\n    dummyData.user.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7f67ec26-a94d-4386-9038-524f96e14939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create user (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;User Create Should fail to create user (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;964cfc12-cff9-40b3-817e-71ce624246ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f67ec26-a94d-4386-9038-524f96e14939&quot;,&quot;964cfc12-cff9-40b3-817e-71ce624246ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b4c4842c-ed37-43d1-b853-ac2de56174f0&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5cac3cce-5d3d-4b6e-af0e-9246c9f5321f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve user data (private)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPrivate(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a4b289d2-dd59-4a75-8e31-be827f24b506&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve user data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;User Find Should fail to retrieve user data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;75540d29-007c-4fad-b234-ee7e061d07c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5cac3cce-5d3d-4b6e-af0e-9246c9f5321f&quot;,&quot;a4b289d2-dd59-4a75-8e31-be827f24b506&quot;,&quot;75540d29-007c-4fad-b234-ee7e061d07c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c1ae2ede-7529-4152-a41c-574084051ee7&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user paginated data&quot;,&quot;fullTitle&quot;:&quot;User Find paginated Should successfully retrieve user paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b777013e-421c-42b4-90d8-7d0f787f436a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b777013e-421c-42b4-90d8-7d0f787f436a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1f181b6-8fae-4d11-9ac1-8af345f906c8&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;User Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e51a810d-2bf3-45d7-8bb8-7be945a44c05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e51a810d-2bf3-45d7-8bb8-7be945a44c05&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9e273785-5a01-472b-9268-54e4e427e30d&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update user data&quot;,&quot;fullTitle&quot;:&quot;User Update Should successfully update user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;450a9daa-a658-40d0-92e1-1042b814a8cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;21146ef6-92a7-4dfb-ba49-0bce76f2d514&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update user data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update user data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8c9dc891-98f0-40c8-91a1-1b482a311abc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;450a9daa-a658-40d0-92e1-1042b814a8cb&quot;,&quot;21146ef6-92a7-4dfb-ba49-0bce76f2d514&quot;,&quot;8c9dc891-98f0-40c8-91a1-1b482a311abc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b75bfed-0b7a-401c-bc03-966413523090&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove user data&quot;,&quot;fullTitle&quot;:&quot;User Remove Should successfully remove user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3fdab7ae-1d8c-4c0b-8aec-19261566aa8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove user data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Remove Should fail to remove user data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;12b5f659-f016-42af-819d-09c4de25b123&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fdab7ae-1d8c-4c0b-8aec-19261566aa8c&quot;,&quot;12b5f659-f016-42af-819d-09c4de25b123&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67b6ddfa-c3eb-4db1-abcb-2cd8d76055a7&quot;,&quot;title&quot;:&quot;Role&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;58207b23-e68f-4860-8aab-5e2e1f589536&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create role&quot;,&quot;fullTitle&quot;:&quot;Role Create Should successfully create role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    dummyData.role.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ab22efec-8e41-4505-aea2-1f4d9b9bd5bb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create role (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create role (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7fbff7c1-60e4-4c1f-b079-4730e54ebddf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create route (Unknown Http method)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create route (Unknown Http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.invalidMethod,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;628bfece-ce3d-4236-a21a-dba83fd9854c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab22efec-8e41-4505-aea2-1f4d9b9bd5bb&quot;,&quot;7fbff7c1-60e4-4c1f-b079-4730e54ebddf&quot;,&quot;628bfece-ce3d-4236-a21a-dba83fd9854c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d924bee5-d62b-4699-8b75-fb4c5f7d28fc&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role data (public)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0987abe2-94ed-4397-8e4e-b0aad0745cca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve role data (private)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPrivate(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;317fb95f-e823-47b7-b01d-084414992d23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve role data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Role Find Should fail to retrieve role data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1c7ed113-dbec-420e-aad2-4b2301644161&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0987abe2-94ed-4397-8e4e-b0aad0745cca&quot;,&quot;317fb95f-e823-47b7-b01d-084414992d23&quot;,&quot;1c7ed113-dbec-420e-aad2-4b2301644161&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9fb54564-7929-43f5-b4bc-7b86618be4b1&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role paginated data&quot;,&quot;fullTitle&quot;:&quot;Role Find paginated Should successfully retrieve role paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b5dfaa68-7653-4ef2-9ef7-f285ac678ca9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5dfaa68-7653-4ef2-9ef7-f285ac678ca9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c7f7df1-f121-4fa4-a4d7-6986b3c6d076&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Role Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9da37aed-bf7a-47ac-bc40-6b44a443e133&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9da37aed-bf7a-47ac-bc40-6b44a443e133&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bcdf65ad-c4d7-4530-96d1-5f05977dcdb3&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f43e57ae-27e4-43ff-97b9-49dd64ab27c3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;97c6911c-fe26-4e49-a89f-4fbf4e316aaa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update role data&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully update role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;be39a10e-aa5c-44bd-9118-e494c6e71036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b7f9e459-8e4d-4045-968b-8b2f49decf8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0b5215ba-8ed2-43a7-8be7-9daa5a37e548&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b3eff739-6a23-4da0-8c09-5374d0994ce7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    let responseArray = body.accessRoutes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aac5218b-59b6-4e22-b5e3-3fda389d0469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2f6b33f0-3d66-4c9d-8832-8ef025298997&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a1bbc450-c78e-468a-b2c4-bd8002be2eb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7c252fd8-64b6-4fd5-8afa-1c9c40f5f671&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;585bcc15-b907-46cd-a433-aa1b9ace9e23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;81aac4c2-e95b-4737-91f2-b25a440d0c9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be39a10e-aa5c-44bd-9118-e494c6e71036&quot;,&quot;b7f9e459-8e4d-4045-968b-8b2f49decf8b&quot;,&quot;0b5215ba-8ed2-43a7-8be7-9daa5a37e548&quot;,&quot;b3eff739-6a23-4da0-8c09-5374d0994ce7&quot;,&quot;aac5218b-59b6-4e22-b5e3-3fda389d0469&quot;,&quot;2f6b33f0-3d66-4c9d-8832-8ef025298997&quot;,&quot;a1bbc450-c78e-468a-b2c4-bd8002be2eb3&quot;,&quot;7c252fd8-64b6-4fd5-8afa-1c9c40f5f671&quot;,&quot;585bcc15-b907-46cd-a433-aa1b9ace9e23&quot;,&quot;81aac4c2-e95b-4737-91f2-b25a440d0c9e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:84,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;59b692b5-4a78-46f7-ab11-ad8ba7e1b1a2&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove role data&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should successfully remove role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7835dcea-8545-4768-9650-33d48fed1e86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should fail to remove role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;61cf6f2b-b152-4909-87df-71e1e4298b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7835dcea-8545-4768-9650-33d48fed1e86&quot;,&quot;61cf6f2b-b152-4909-87df-71e1e4298b80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;31fccfaa-2680-4664-96a5-482dc9f16ac8&quot;,&quot;title&quot;:&quot;Acm&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1b2ddeff-19cc-43c1-b8e2-469ca8c67364&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create acm&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    dummyData.acm.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5f178dcb-0666-43af-8790-086dd87aa3c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create acm (By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm (By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.successByObject,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true, \&quot;object\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b8a6a4fe-c3bc-447c-81eb-9908489254e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;feb3f06c-1cc7-4e4d-aa9a-48f9eb0056fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing, By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing, By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f6f0c430-5ea4-4f5a-87cb-6c662d4f153f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f178dcb-0666-43af-8790-086dd87aa3c7&quot;,&quot;b8a6a4fe-c3bc-447c-81eb-9908489254e0&quot;,&quot;feb3f06c-1cc7-4e4d-aa9a-48f9eb0056fb&quot;,&quot;f6f0c430-5ea4-4f5a-87cb-6c662d4f153f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;e034afe7-4cd4-4dc2-968c-9a0db7b78707&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm data (public)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c7776827-4585-4749-b120-1f726ffd3e28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve acm data (private)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPrivate(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ce965c13-778b-4dcb-9540-40a34f71b1e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d66d9c18-ad0c-4f6f-b956-01f87f5a3257&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7776827-4585-4749-b120-1f726ffd3e28&quot;,&quot;ce965c13-778b-4dcb-9540-40a34f71b1e6&quot;,&quot;d66d9c18-ad0c-4f6f-b956-01f87f5a3257&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3bb399bb-07a3-484b-9eca-5c12abaaefe9&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm paginated data&quot;,&quot;fullTitle&quot;:&quot;Acm Find paginated Should successfully retrieve acm paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7bce62b4-e900-4ed8-b931-5f77275b0446&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7bce62b4-e900-4ed8-b931-5f77275b0446&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45fd9c92-4d08-421d-9a79-2c40483a2672&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Acm Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;54d40552-e328-4f50-a83c-50a6e0a711b3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54d40552-e328-4f50-a83c-50a6e0a711b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;107c9d7a-d103-4ad5-ac4d-40e50ba2c0bb&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    acmData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c59edba1-0ac6-4c45-bdb2-af5b4898e838&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7153683f-431b-4bbc-a244-8eb8299fc0fd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully update acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.nModified).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;563f7146-1bb4-4329-8d0b-ae0a3fc81dd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bb955f26-3245-474d-98d0-356e3acecf11&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ad9c5913-6a3c-46ec-9014-952b07f718e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3cb9d210-fb46-497c-a877-e19397d5f38f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    let responseArray = body.accessControl.read;\n    delete responseArray[responseArray.indexOf(update.success.data[0])];\n    delete responseArray[responseArray.indexOf(update.success.data[1])];\n    expect(responseArray).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fff022c9-f288-427f-83af-4079dc20460b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0412bb9c-84ea-411d-8c46-d6df1ef56e41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b1506e2a-09af-4cda-aa92-c69c2d68cffb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;463d9c60-dd24-45cd-829f-4629bdc4a204&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;73e1b24f-0e0f-4a9a-9e96-eb3b4afdf0c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f2f8ed1a-a0e1-47b1-ba49-916512831145&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;563f7146-1bb4-4329-8d0b-ae0a3fc81dd8&quot;,&quot;bb955f26-3245-474d-98d0-356e3acecf11&quot;,&quot;ad9c5913-6a3c-46ec-9014-952b07f718e4&quot;,&quot;3cb9d210-fb46-497c-a877-e19397d5f38f&quot;,&quot;fff022c9-f288-427f-83af-4079dc20460b&quot;,&quot;0412bb9c-84ea-411d-8c46-d6df1ef56e41&quot;,&quot;b1506e2a-09af-4cda-aa92-c69c2d68cffb&quot;,&quot;463d9c60-dd24-45cd-829f-4629bdc4a204&quot;,&quot;73e1b24f-0e0f-4a9a-9e96-eb3b4afdf0c3&quot;,&quot;f2f8ed1a-a0e1-47b1-ba49-916512831145&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:73,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9fe1f7c5-24d3-4323-87cd-9e92bee2fe1a&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should successfully remove acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;30155b18-5647-4eea-9673-392572b082dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove acm data (Query not provide)&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should fail to remove acm data (Query not provide)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;02ad55c5-8b45-4405-9fee-8e46dd6cf35b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30155b18-5647-4eea-9673-392572b082dd&quot;,&quot;02ad55c5-8b45-4405-9fee-8e46dd6cf35b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5438dbe2-6993-47a6-8836-b7b4581b99c1&quot;,&quot;title&quot;:&quot;Admin&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;906db1d3-b8c3-4cad-bd77-c33f6b88b6c6&quot;,&quot;title&quot;:&quot;SignUp&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully signup Admin&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should successfully signup Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAdmin(body, true);\n    dummyData.admin.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;92c58d07-59ae-4525-a9a6-84eeee50a82c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (Validate error)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (Validate error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;50a31801-d80a-4e6b-847e-999fabf2b939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (UserName exists)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (UserName exists)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Fails because the exact test have been done before.\nsendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.USERNAME_EXISTS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e5e7ba6f-e56b-4a42-ac35-94812b135256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92c58d07-59ae-4525-a9a6-84eeee50a82c&quot;,&quot;50a31801-d80a-4e6b-847e-999fabf2b939&quot;,&quot;e5e7ba6f-e56b-4a42-ac35-94812b135256&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c925de75-cf84-4c24-9d37-d93f626b03f6&quot;,&quot;title&quot;:&quot;Login&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to login (Wrong credential)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Wrong credential)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.wrongCredential,401,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.UNAUTHORIZED_ACCESS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;410a6f67-7a8f-4d0a-b6b6-83e8afc9cf02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to login (Missing fields)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Missing fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;98e6cc8a-c3e5-4027-8f87-78a8a7c5622a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully login Admin&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should successfully login Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;token&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dc96cdd6-bbbc-49b5-8ce7-8a68db27e442&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;410a6f67-7a8f-4d0a-b6b6-83e8afc9cf02&quot;,&quot;98e6cc8a-c3e5-4027-8f87-78a8a7c5622a&quot;,&quot;dc96cdd6-bbbc-49b5-8ce7-8a68db27e442&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee68eb18-5f8b-470c-9e3d-4c5272424102&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Admin Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2bd4c11c-4c56-4f50-be77-ed5ebc771c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bd4c11c-4c56-4f50-be77-ed5ebc771c25&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b21275c-8826-4af1-84ff-ae599346e3f2&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should successfully retrieve admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.admin.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fcc69310-e2be-4b87-b338-428fec41a81a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fe1815b3-6e83-46ed-9640-334e98e22145&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fcc69310-e2be-4b87-b338-428fec41a81a&quot;,&quot;fe1815b3-6e83-46ed-9640-334e98e22145&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f666c12-3aa5-4927-864a-c8f12b140758&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c903f338-6d47-4f69-b8da-963c732a29ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c903f338-6d47-4f69-b8da-963c732a29ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;83d64757-b534-4983-97d3-e5192002389a&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should successfully update admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9e64de82-fc6c-4e83-aeab-3065dddcdaed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;84df9b0c-e583-4425-9c77-0710cf68309f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update admin data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update admin data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7ee51f54-c5f4-4bf6-a1b9-854692d8cd0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e64de82-fc6c-4e83-aeab-3065dddcdaed&quot;,&quot;84df9b0c-e583-4425-9c77-0710cf68309f&quot;,&quot;7ee51f54-c5f4-4bf6-a1b9-854692d8cd0a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7000079a-4414-497f-b100-0a2b4fcea241&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should successfully remove admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aaf878be-f043-4ad3-8680-c73fea93a097&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove admin data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should fail to remove admin data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6098cc5b-872b-4c02-824a-f3b1b6142878&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aaf878be-f043-4ad3-8680-c73fea93a097&quot;,&quot;6098cc5b-872b-4c02-824a-f3b1b6142878&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a80df959-a80b-4626-b4a9-71bf0bfcf1dc&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cbf7498f-56d0-42b1-a20d-23d837353523&quot;,&quot;title&quot;:&quot;Status&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve server&#x27;s overall status&quot;,&quot;fullTitle&quot;:&quot;Log Status Should successfully retrieve server&#x27;s overall status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.status(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;memoryUsage\&quot;, \&quot;cpuUsage\&quot;, \&quot;upTime\&quot;]);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a4775f29-f7bd-4585-a5d1-4144d5c22668&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4775f29-f7bd-4585-a5d1-4144d5c22668&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81d25f66-bd3e-4340-8f01-c4b083235c30&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve log data&quot;,&quot;fullTitle&quot;:&quot;Log Find Should successfully retrieve log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.get(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;info\&quot;]);\n    expect(body.info).to.be.an(&#x27;array&#x27;);\n    expect(body.info).length.to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0b2981df-e709-43fd-997c-50db5cace04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b2981df-e709-43fd-997c-50db5cace04a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b5e3834-56c1-4c0a-859f-1d20677efdc7&quot;,&quot;title&quot;:&quot;Flush&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully flush log data&quot;,&quot;fullTitle&quot;:&quot;Log Flush Should successfully flush log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.flush(),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;message\&quot;]);\n    expect(body.message).to.equal(\&quot;Logs flushed\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;184a958b-0039-40a9-8bc9-055489cc909f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;184a958b-0039-40a9-8bc9-055489cc909f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f5b75583-5f73-4a80-b958-7fe2845a83c6&quot;,&quot;title&quot;:&quot;Schema&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3e1ca4b0-2608-4d0c-a38c-88159da74645&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Schema Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d4c0200c-1b74-4671-9d88-87279e8c5737&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4c0200c-1b74-4671-9d88-87279e8c5737&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de69420c-1585-482b-81e3-4e445e834f77&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;Schema Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.findPaginated(query),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    let sampleSchema = body.docs[0];\n    isSchema(sampleSchema);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;972767ae-f01e-4af6-ab79-8b5ebc24604b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;972767ae-f01e-4af6-ab79-8b5ebc24604b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1aa2a358-1437-4902-99dc-7a0693cb5021&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Schema Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cd802505-f072-41f9-a9ba-74adef1225d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd802505-f072-41f9-a9ba-74adef1225d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f34443c-e873-49cd-8680-ac24d00659ff&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Schema Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ceb89687-0e9d-4bf1-80d1-63dbd5efa488&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to update Schema (Schema does not exist)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Schema does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=noneExistent&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;85a1678d-579a-4d90-a2b8-abbd99e86dd0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Target not defined) &quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Target not defined) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5774f510-9543-4c64-817e-fb5e908db366&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Operation not defined)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Operation not defined)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8a7048a0-3e8c-417e-ac9c-33982b110b27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully add a new role to a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully add a new role to a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;62562963-c68a-446e-afaf-672f1554d525&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully remove a role from a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully remove a role from a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;pull\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.not.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b1bbf106-6a4c-4b3e-aa2e-facff36b6ab6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85a1678d-579a-4d90-a2b8-abbd99e86dd0&quot;,&quot;5774f510-9543-4c64-817e-fb5e908db366&quot;,&quot;8a7048a0-3e8c-417e-ac9c-33982b110b27&quot;,&quot;62562963-c68a-446e-afaf-672f1554d525&quot;,&quot;b1bbf106-6a4c-4b3e-aa2e-facff36b6ab6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b542d91-bc52-40c5-aed2-6eb2f6ec0171&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove Schema&quot;,&quot;fullTitle&quot;:&quot;Schema Remove Should successfully remove Schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3bc393b1-336a-46b3-b84d-140cd283d05a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3bc393b1-336a-46b3-b84d-140cd283d05a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;abdafd04-c570-46cb-8255-ea4cd074f1ec&quot;,&quot;title&quot;:&quot;Socket&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3d42beb6-9473-47e5-af56-6a50c53e96c5&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully receive streamed request logs.&quot;,&quot;fullTitle&quot;:&quot;Socket Log Should successfully receive streamed request logs.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1062,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let socketURL = `http://0.0.0.0:${process.env.HTTP_PORT}`;\nlet options = {\n    transports: [&#x27;websocket&#x27;],\n    &#x27;force new connection&#x27;: true\n};\n(()=&gt;{\n    let execRequests = [];\n    for(let i=0; i&lt;1; i++){\n        execRequests.push(function (callback) {\n            setTimeout(function () {\n                let deniedMethodOnObject = {\n                    service     : \&quot;Service A\&quot;,\n                        ip          : \&quot;172.16.1.41\&quot;,\n                        params      : null,\n                        path        : \&quot;http://sample/route\&quot;,\n                        query       : null,\n                        secure      : true,\n                        xhr         : false,\n                        route       : \&quot;http://sample/route\&quot;,\n                        method      : \&quot;PUT\&quot;,\n                        body        : {sampleKey : \&quot;sampleVal\&quot;},\n                        objectId    : \&quot;5cee7a0456f44a4e65b35532\&quot;,\n                        token       : \&quot;wrong_token\&quot;\n                };\n                sendRequest(url.token.validate(),&#x27;post&#x27;,deniedMethodOnObject,200,function () {\n                    callback(null);\n                });\n            },500)\n        })\n    }\n    async.waterfall(execRequests);\n})();\nlet client = socketClient.connect(socketURL, options);\nclient.on(&#x27;logs&#x27;, function(data){\n    if(data){done();}\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;11fad447-98af-47e0-88f9-ad68e1670ccd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11fad447-98af-47e0-88f9-ad68e1670ccd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1062,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;report&quot;,&quot;reportTitle&quot;:&quot;hisab_authorization_service&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.json&quot;,&quot;htmlFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>