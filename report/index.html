<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:51,&quot;tests&quot;:115,&quot;passes&quot;:115,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2019-10-20T10:17:52.621Z&quot;,&quot;end&quot;:&quot;2019-10-20T10:17:58.068Z&quot;,&quot;duration&quot;:5447,&quot;testsRegistered&quot;:115,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;94302e14-8894-4451-b92e-6959383fdd79&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;44d97fc4-4028-4065-a59f-33297ca3ba4b&quot;,&quot;title&quot;:&quot;Token&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19dad467-0f32-44ec-a65b-0b359cef6102&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to create token (Validation error)&quot;,&quot;fullTitle&quot;:&quot;Token Create Should fail to create token (Validation error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.validationError,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;acde6162-b890-4a85-b186-673e94f4f659&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create token&quot;,&quot;fullTitle&quot;:&quot;Token Create Should successfully create token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.create(),&#x27;post&#x27;,dummyData.token.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isToken(body, true);\n    dummyData.token.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8046dcb8-4efd-4a90-bf04-ecd6c8e448a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;acde6162-b890-4a85-b186-673e94f4f659&quot;,&quot;8046dcb8-4efd-4a90-bf04-ecd6c8e448a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:119,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;1e60321d-fe57-474e-9251-c00e48bd6349&quot;,&quot;title&quot;:&quot;Validate&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;Generating dummy data for tests.\&quot;);\nasync.waterfall([\n    requestToken,\n    updateAnyRole, // route to be accessed by all\n    updateAnyACM,\n    createUserRole,\n    createUserACM\n],function () {\n    done();\n});\n/**\n * @name            - Request token\n * @description     - Requests a new token by userId.\n * @param callback  - Callback function (error)\n */\nfunction requestToken(callback) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) {\n        validateToken.allowedToBeAccessedByAny.token = res.body.token;\n        validateToken.allowedToBeAccessedByNone.token = res.body.token;\n        validateToken.allowedToPerformPUTByAny.token = res.body.token;\n        validateToken.deniedToPerformDELETEByAny.token = res.body.token;\n        validateToken.allowedToPerformPUTByUser.token = res.body.token;\n        validateToken.allowedToPerformPUTByUserOnUserRoute.token = res.body.token;\n        validateToken.allowedToPerformMethodDeniedRoute.token = res.body.token;\n        validateToken.deniedMethodOnObject.token = res.body.token;\n        validateToken.allowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessRoute.token = res.body.token;\n        validateToken.notAllowedToAccessMethodButRoute.token = res.body.token;\n        callback(null);\n    });\n}\n/**\n * @name            - Update any role\n * @description     - Updates role type &#x27;any&#x27; to have access for the routes accessed by all\n * @param callback  - Callback function (error)\n */\nfunction updateAnyRole(callback) {\n    let updateData  = {accessRoutes : [\n            { route : route.accessedByAll, method : \&quot;POST\&quot;},\n            { route : route.accessedByAll, method : \&quot;PUT\&quot;},\n            { route : route.accessedByAll, method : \&quot;GET\&quot;}\n            ]};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Update any acm\n * @description     - Updates any acm role\n * @param callback  - Callback function (error)\n */\nfunction updateAnyACM(callback) {\n    let updateData = {\n        accessControl : {\n            read    : [performPUTOnObjectByAny],\n            update  : [performPUTOnObjectByAny]\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){callback(null);}\n    });\n}\n/**\n * @name            - Create user role\n * @description     - Create sample role with test user\n * @param callback  - Callback function (error)\n */\nfunction createUserRole(callback) {\n    let sampleRole = {\n        name            : \&quot;Sample Privilege\&quot;,\n        description     : \&quot;Sample description for the privilege\&quot;,\n        members         : [userId],\n        accessRoutes    : [\n            {route : route.accessedByUser, method : \&quot;PUT\&quot;}\n        ]\n    };\n    sendRequest(url.role.create(),&#x27;post&#x27;,sampleRole,201,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}\n/**\n * @name            - Create user acm\n * @description     - Creates custom user acm data.\n * @param callback  - Callback function (error)\n */\nfunction createUserACM(callback) {\n    let userACMData = {\n        subject : userId,\n        accessControl : {\n            update : [performPUTOnObjectByUser]\n        }\n    };\n    sendRequest(url.acm.create(),&#x27;post&#x27;,userACMData,200,function (err,res) {\n        let body = res.body;\n        if(body._id){callback(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dde50630-885c-4762-9a49-2a815cf8a541&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Token Validate \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Roll back\nasync.waterfall([\n    removedAnyRoleUpdate,\n    removeAnyACMUpdate,\n    removeUserRole,\n    removeUserACM\n],function () {\n    console.log(\&quot;Rollback completed.\&quot;)\n});\nfunction removedAnyRoleUpdate(cb) {\n    let updateData  = {accessRoutes : []};\n    sendRequest(url.role.update(\&quot;name=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeAnyACMUpdate(cb) {\n    let updateData = {\n        accessControl : {\n            read    : [],\n            update  : []\n        }\n    };\n    sendRequest(url.acm.update(\&quot;subject=any\&quot;),&#x27;put&#x27;,updateData,200,function (err,res) {\n        let body = res.body;\n        if(body.ok){cb(null);}\n    });\n}\nfunction removeUserRole(cb) {\n    let userRoleQuery = \&quot;name=Sample Privilege\&quot;;\n    sendRequest(url.role.remove(userRoleQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}\nfunction removeUserACM(cb) {\n    let userACMQuery = `subject=${userId}`;\n    sendRequest(url.acm.remove(userACMQuery),&#x27;delete&#x27;,null, 200, function (err, res) {\n        if(res.body.ok){cb(null);}\n    });\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c0929e94-22f9-4795-8e9c-ca2b7563338c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to grant access (Body missing required fields)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Body missing required fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode); // Validation error\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fc7e93fe-171e-4cc9-bd06-183c05e225f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Route is allowed to be accessed by anyone)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToBeAccessedByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39466724-3a32-4abe-8413-bfb7b291f271&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (Token has expired)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (Token has expired)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2046,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let tokenExpirationTimeCopy = process.env.TOKEN_EXPIRATION_TIME;\nprocess.env.TOKEN_EXPIRATION_TIME = \&quot;1000\&quot;; // Change token expiration time to one second.\nasync.waterfall([\n    createAToken,\n    validateExpToken,\n    rollBackExpirationTime\n],function () {\n    done();\n});\n/**\n * @name            - Create token\n * @description     - Creates a new token for user by 1sec expiration time\n * @param cb        - Callback function (error, response)\n */\nfunction createAToken(cb) {\n    sendRequest(url.token.create(),&#x27;post&#x27;,{userId : userId},201,function (err,res) { // Create token\n        cb(null, res);\n    });\n}\n/**\n * @name            - Validate Exp token\n * @description     - Validation an expired token after 2sec (1 sec safe threshold)\n * @param res       - Token data response object\n * @param cb        - Callback function (error)\n */\nfunction validateExpToken(res, cb) {\n    validateToken.toExpireAfterOneSec.token = res.body.token;\n    setTimeout(function () {\n        sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.toExpireAfterOneSec,401,function (err,res) {\n            let body = res.body;\n            expect(body.message).to.equal(message.ACCESS_DENIED);\n            cb(null);\n        });\n    },2000);\n}\n/**\n * @name            - Roll back expiration time\n * @description     - Rolls back expiration time to whatever was set on the process env before the test.\n * @param cb        - Callback function (error)\n */\nfunction rollBackExpirationTime(cb) {\n    process.env.TOKEN_EXPIRATION_TIME = tokenExpirationTimeCopy;\n    cb(null);\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;683e6638-b21e-41c0-a088-e75d36be9ae3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (Group &#x27;any&#x27; is allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;67a5c34c-72ca-466e-a214-8c604c33cc3d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully deny access (Group &#x27;any&#x27; is not allowed to perform operation on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedToPerformDELETEByAny,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e77c4d51-12c7-48cc-85e4-b9ad3c479291&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with all access of route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUser,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d71035c4-8a52-4665-9dd0-f8b5444f8250&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to perform method on object, with only user access route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformPUTByUserOnUserRoute,200,function (err,res) {\n                        let body = res.body;\n                        expect(body.message).to.equal(message.ACCESS_GRANTED);\n                        done();\n                    });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7da0dff7-1824-46dd-9847-28bfe4e1564d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should successfully grant access (User is allowed to access route+method, no object access (RUD) is requested )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToAccessRoute,200,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_GRANTED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;993fbc5c-79b7-4d62-bf16-6b3a4de13ee5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access route+method) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessRoute,400,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;99c45408-3202-4740-a439-e10ddb82bc5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User is not allowed to access method but route)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.notAllowedToAccessMethodButRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b97d5841-ebf0-4191-ad39-f562e2eedd50&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User allowed to perform method on object and denied route.)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.allowedToPerformMethodDeniedRoute,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;279500ab-7425-4ffa-b1df-e341457c0f95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;fullTitle&quot;:&quot;Token Validate Should fail to grant access (User or &#x27;any&#x27; group is denied to perform method on object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.token.validate(),&#x27;post&#x27;,validateToken.deniedMethodOnObject,401,function (err,res) {\n    let body = res.body;\n    expect(body.message).to.equal(message.ACCESS_DENIED);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;df68a740-107e-43bb-8ec8-deeee4bdc488&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc7e93fe-171e-4cc9-bd06-183c05e225f2&quot;,&quot;39466724-3a32-4abe-8413-bfb7b291f271&quot;,&quot;683e6638-b21e-41c0-a088-e75d36be9ae3&quot;,&quot;67a5c34c-72ca-466e-a214-8c604c33cc3d&quot;,&quot;e77c4d51-12c7-48cc-85e4-b9ad3c479291&quot;,&quot;d71035c4-8a52-4665-9dd0-f8b5444f8250&quot;,&quot;7da0dff7-1824-46dd-9847-28bfe4e1564d&quot;,&quot;993fbc5c-79b7-4d62-bf16-6b3a4de13ee5&quot;,&quot;99c45408-3202-4740-a439-e10ddb82bc5d&quot;,&quot;b97d5841-ebf0-4191-ad39-f562e2eedd50&quot;,&quot;279500ab-7425-4ffa-b1df-e341457c0f95&quot;,&quot;df68a740-107e-43bb-8ec8-deeee4bdc488&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2264,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63f4a9f8-78d2-4b51-8036-c173b9ab98ad&quot;,&quot;title&quot;:&quot;Service&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1b066f9f-148b-4904-b351-1051437de903&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create service&quot;,&quot;fullTitle&quot;:&quot;Service Create Should successfully create service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    dummyData.service.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;59ace04f-51b8-4377-8ba5-6d9278d3bef8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method and route fields missing)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method and route fields missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;41de01bd-c3db-4481-bdbb-10a003058688&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create service (Method is not http method)&quot;,&quot;fullTitle&quot;:&quot;Service Create Should fail to create service (Method is not http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;64844f95-c400-4681-a85c-157d290e1c98&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59ace04f-51b8-4377-8ba5-6d9278d3bef8&quot;,&quot;41de01bd-c3db-4481-bdbb-10a003058688&quot;,&quot;64844f95-c400-4681-a85c-157d290e1c98&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:62,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;422a8130-8a51-466e-9a2d-bdaad3065690&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service data (public)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;13dbd14c-5fd4-4b53-bc47-9af99729fb78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve service data (private)&quot;,&quot;fullTitle&quot;:&quot;Service Find Should successfully retrieve service data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPrivate(dummyData.service.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.service.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;93cba9ec-107d-446b-a7df-5876f056d4f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve service data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Service Find Should fail to retrieve service data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findByIdPublic(dummyData.service.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1c6d37ef-1251-4415-8b6c-c431372a8a55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13dbd14c-5fd4-4b53-bc47-9af99729fb78&quot;,&quot;93cba9ec-107d-446b-a7df-5876f056d4f3&quot;,&quot;1c6d37ef-1251-4415-8b6c-c431372a8a55&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af607d02-8ce0-4d8c-ab33-8ab09f70e8c7&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve service paginated data&quot;,&quot;fullTitle&quot;:&quot;Service Find paginated Should successfully retrieve service paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e161868a-d62b-4c40-a1d0-97191c250e7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e161868a-d62b-4c40-a1d0-97191c250e7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58ddf8fe-2691-40c7-9497-9725acae457e&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Service Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;afeb9fea-398e-4d7f-89ba-1166125fd552&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afeb9fea-398e-4d7f-89ba-1166125fd552&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d68a03f6-0b44-42ea-8a46-895b173fe6e8&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.service.create(),&#x27;post&#x27;,dummyData.service.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body, true);\n    serviceData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;02cb71e8-2652-4c69-83be-6485419b45a1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Service Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1e110a56-f2ab-451c-8439-beb5b268861e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update service data&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully update service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;75eacf2c-e104-4923-af8f-fdc46b24ef28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0cfdeee6-1c0a-4d5c-bdd0-f8b21d42dfec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update service data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to update service data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,dummyData.service.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;68385c28-b4ed-4b9c-9dc2-7c4b4360f132&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(... update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7504060a-0c0b-4970-b30a-4756fb5487a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).excluding(&#x27;_id&#x27;).to.include(...update.success.data);\n    let responseArray = body.routes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fc6f4994-0473-4fac-b6b9-a5411e5bc9cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Service Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b8acf62b-1c5d-4695-a85f-379250930227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isService(body);\n    expect(body.routes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;13934586-a0be-48ed-b6f3-3968434374ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;27fd04e7-be60-4895-b87d-60707415e453&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;625693ed-6414-48f0-970f-ac0958838741&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Service Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${serviceData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.service.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dd21a02e-b754-4e16-b95f-fba94f588743&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75eacf2c-e104-4923-af8f-fdc46b24ef28&quot;,&quot;0cfdeee6-1c0a-4d5c-bdd0-f8b21d42dfec&quot;,&quot;68385c28-b4ed-4b9c-9dc2-7c4b4360f132&quot;,&quot;7504060a-0c0b-4970-b30a-4756fb5487a5&quot;,&quot;fc6f4994-0473-4fac-b6b9-a5411e5bc9cb&quot;,&quot;b8acf62b-1c5d-4695-a85f-379250930227&quot;,&quot;13934586-a0be-48ed-b6f3-3968434374ef&quot;,&quot;27fd04e7-be60-4895-b87d-60707415e453&quot;,&quot;625693ed-6414-48f0-970f-ac0958838741&quot;,&quot;dd21a02e-b754-4e16-b95f-fba94f588743&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df89e7f8-1346-4499-bd25-b1b58aab116b&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove service data&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should successfully remove service data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.service.get.success._id}`;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d19725f3-9ccb-4618-a99a-6490631198f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove service data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Service Remove Should fail to remove service data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.service.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b44180c4-6dae-4a7c-a243-067bfb5e3171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d19725f3-9ccb-4618-a99a-6490631198f4&quot;,&quot;b44180c4-6dae-4a7c-a243-067bfb5e3171&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f5a822ea-f23d-4ce7-a36d-4d2640f8edb5&quot;,&quot;title&quot;:&quot;User&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;486b0d81-70a7-4f01-a941-8ca38dc2b02b&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create user&quot;,&quot;fullTitle&quot;:&quot;User Create Should successfully create user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUser(body, true);\n    dummyData.user.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a4b5a8e8-8cdc-415e-9fce-efcd94e0bb85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create user (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;User Create Should fail to create user (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.create(),&#x27;post&#x27;,dummyData.user.create.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;621a932b-ede7-44f6-9c2d-be8f051cf7d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4b5a8e8-8cdc-415e-9fce-efcd94e0bb85&quot;,&quot;621a932b-ede7-44f6-9c2d-be8f051cf7d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ce8af284-7b4d-4e9f-b1f8-4a8c66e36f93&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c437e18c-4bf7-43d4-8f8a-c459a2e8d5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve user data (private)&quot;,&quot;fullTitle&quot;:&quot;User Find Should successfully retrieve user data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPrivate(dummyData.user.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.user.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6d34e912-ee10-4efa-89ec-d761ef507b74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve user data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;User Find Should fail to retrieve user data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findByIdPublic(dummyData.user.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1d0bf394-e260-45be-a19d-80486013a534&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c437e18c-4bf7-43d4-8f8a-c459a2e8d5ff&quot;,&quot;6d34e912-ee10-4efa-89ec-d761ef507b74&quot;,&quot;1d0bf394-e260-45be-a19d-80486013a534&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;52ae3aa8-59e0-41d8-b87a-14195d380dfc&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user paginated data&quot;,&quot;fullTitle&quot;:&quot;User Find paginated Should successfully retrieve user paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6a115474-02bd-458e-9f83-63f35cf2dd8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a115474-02bd-458e-9f83-63f35cf2dd8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f232ed60-111a-4b76-9de6-14a5255f4fdd&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;User Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.user.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;40e0584b-2907-46ec-8291-a4cdd8808905&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40e0584b-2907-46ec-8291-a4cdd8808905&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;712655a8-6fe2-4b2a-a3ac-130017689a20&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update user data&quot;,&quot;fullTitle&quot;:&quot;User Update Should successfully update user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;be96e45d-21fc-49da-a5de-a53ccea4174b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;435aa4d7-307d-4918-8c7b-b2ec1e4e8468&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update user data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;User Update Should fail to update user data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.update(query),&#x27;put&#x27;,dummyData.user.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a92421d8-f5e3-436c-8bb0-6244c7ef59bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be96e45d-21fc-49da-a5de-a53ccea4174b&quot;,&quot;435aa4d7-307d-4918-8c7b-b2ec1e4e8468&quot;,&quot;a92421d8-f5e3-436c-8bb0-6244c7ef59bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dadb280a-6273-4fc4-a69c-bcf8e7a6474b&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove user data&quot;,&quot;fullTitle&quot;:&quot;User Remove Should successfully remove user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.user.get.success._id}`;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0408b80e-39a1-4045-b308-ea65c1d5ed5e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove user data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;User Remove Should fail to remove user data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.user.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;56a9e9f5-da6b-4bc0-ae41-f32242bae6b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0408b80e-39a1-4045-b308-ea65c1d5ed5e&quot;,&quot;56a9e9f5-da6b-4bc0-ae41-f32242bae6b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e0456097-1c27-4e02-88a8-6316df0cc7bb&quot;,&quot;title&quot;:&quot;Role&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;13ed7803-ed74-4207-94db-cdb49512f3e2&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create role&quot;,&quot;fullTitle&quot;:&quot;Role Create Should successfully create role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    dummyData.role.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;44fd2b13-e5eb-49ce-9062-2d7d2a39728e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create role (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create role (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.missingRequiredFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5ee93b75-e260-4290-ba57-3ef587efa5f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create route (Unknown Http method)&quot;,&quot;fullTitle&quot;:&quot;Role Create Should fail to create route (Unknown Http method)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.invalidMethod,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body, true);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5c939cfd-1289-4e42-bdaa-4db4b1537e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44fd2b13-e5eb-49ce-9062-2d7d2a39728e&quot;,&quot;5ee93b75-e260-4290-ba57-3ef587efa5f8&quot;,&quot;5c939cfd-1289-4e42-bdaa-4db4b1537e66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:41,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73c0064b-f611-4170-bfb7-9724ed84d9cd&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role data (public)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fe108651-b46d-4fc9-bef2-dd3577e2b7a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve role data (private)&quot;,&quot;fullTitle&quot;:&quot;Role Find Should successfully retrieve role data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPrivate(dummyData.role.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.role.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e6e23183-494c-4152-9459-cdbc813858dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve role data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Role Find Should fail to retrieve role data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findByIdPublic(dummyData.role.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3fac7361-d70f-4db0-b7e3-08c9273bb5b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe108651-b46d-4fc9-bef2-dd3577e2b7a4&quot;,&quot;e6e23183-494c-4152-9459-cdbc813858dc&quot;,&quot;3fac7361-d70f-4db0-b7e3-08c9273bb5b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;180b6420-0dfa-474b-a61d-59a3a904926e&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve role paginated data&quot;,&quot;fullTitle&quot;:&quot;Role Find paginated Should successfully retrieve role paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6817f1df-9896-4ab4-b333-7926f3f0950a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6817f1df-9896-4ab4-b333-7926f3f0950a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;20e9625e-ff4b-4777-9b8c-848fbcb513d5&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Role Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7a51ee1-c18d-42f2-be16-60a885204697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7a51ee1-c18d-42f2-be16-60a885204697&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;05ba69b0-42f7-4884-9995-b68b02be9972&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;424eca09-a38b-4c1d-9c74-2ece98c9b444&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Role Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;17c5949d-bfa9-4c2e-94e6-bd3673a45be0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update role data&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully update role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body); \n    expect(body.nModified).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;578a9ae6-6131-410c-9658-bbd83c1b9a37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.success,400,function (err,res) {\n    let body = res.body;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;71b579aa-c378-4665-be49-0cc5e0d3613d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update role data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to update role data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,dummyData.role.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d629ce7c-7881-45cc-9212-ac1b1cfed03b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5b44722d-0d3b-4578-b078-f698a4e08941&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    (function () {\n        body.accessRoutes.forEach(function (accessRoute) {\n            delete accessRoute._id;\n        })\n    })();\n    expect(body.accessRoutes).to.include(...update.success.data);\n    let responseArray = body.accessRoutes;\n    helper.removeChildFromParent(responseArray, update.success.data);\n    expect(responseArray).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ae42f252-7c9b-4a8a-9ceb-b44d0935b17a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Role Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bb86c4e6-1c1a-4364-995e-e91bdbdbc812&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body);\n    expect(body.accessRoutes).to.not.include(...update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;de9a07fd-a5b5-42af-a28c-54006b383860&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;417c5b64-e55d-4f2a-aa51-109355d0b784&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=notFound&amp;operation=pull`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f76cdb82-0b0e-45d1-9bf2-59042b3b6ea3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Role Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${roleData._id}&amp;target=${update.success.target}&amp;operation=push`;\nsendRequest(url.role.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dea161d1-a61e-44a6-b774-c8ff585d182a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;578a9ae6-6131-410c-9658-bbd83c1b9a37&quot;,&quot;71b579aa-c378-4665-be49-0cc5e0d3613d&quot;,&quot;d629ce7c-7881-45cc-9212-ac1b1cfed03b&quot;,&quot;5b44722d-0d3b-4578-b078-f698a4e08941&quot;,&quot;ae42f252-7c9b-4a8a-9ceb-b44d0935b17a&quot;,&quot;bb86c4e6-1c1a-4364-995e-e91bdbdbc812&quot;,&quot;de9a07fd-a5b5-42af-a28c-54006b383860&quot;,&quot;417c5b64-e55d-4f2a-aa51-109355d0b784&quot;,&quot;f76cdb82-0b0e-45d1-9bf2-59042b3b6ea3&quot;,&quot;dea161d1-a61e-44a6-b774-c8ff585d182a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:130,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:15000},{&quot;uuid&quot;:&quot;e451b411-183f-4d96-9142-499f8f6d848b&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove role data&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should successfully remove role data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.role.get.success._id}`;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.n).to.be.at.least(1); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1286e565-9f7d-4087-b457-feab92f1b943&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove role data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Role Remove Should fail to remove role data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.role.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6fc13f2c-7490-4f91-a52f-2d5a357bcd25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1286e565-9f7d-4087-b457-feab92f1b943&quot;,&quot;6fc13f2c-7490-4f91-a52f-2d5a357bcd25&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b7a13710-d06a-4611-95bf-605ec47da616&quot;,&quot;title&quot;:&quot;Acm&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac0d3b61-a920-4115-be69-8a0bc7f02684&quot;,&quot;title&quot;:&quot;Create&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully create acm&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    dummyData.acm.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aeb49d3b-902f-4d5e-90f0-ff0dcb6ab2a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully create acm (By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should successfully create acm (By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.successByObject,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true, \&quot;object\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;16261e90-5d51-4ca8-b3d6-af4a4a121c0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2b39492a-e4b2-41e7-a0c8-3c4e1d4226f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to create acm (Required field missing, By Object)&quot;,&quot;fullTitle&quot;:&quot;Acm Create Should fail to create acm (Required field missing, By Object)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(\&quot;object\&quot;),&#x27;post&#x27;,dummyData.acm.create.missingFields,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2f6bc576-3379-4f0e-b928-5aaa0ada7fcb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aeb49d3b-902f-4d5e-90f0-ff0dcb6ab2a4&quot;,&quot;16261e90-5d51-4ca8-b3d6-af4a4a121c0d&quot;,&quot;2b39492a-e4b2-41e7-a0c8-3c4e1d4226f4&quot;,&quot;2f6bc576-3379-4f0e-b928-5aaa0ada7fcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:131,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;f60cd30d-b264-449f-8fd5-e65f4d221b56&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm data (public)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9f5c1208-66be-448c-9c63-e7ec1563a722&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully retrieve acm data (private)&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should successfully retrieve acm data (private)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPrivate(dummyData.acm.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.acm.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aa72d8b5-1a7a-45d3-a5c8-f85bc54e51fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Acm Find Should fail to retrieve acm data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findByIdPublic(dummyData.acm.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;02ec9e8f-532e-48cf-a4d3-91fe98fcc01d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f5c1208-66be-448c-9c63-e7ec1563a722&quot;,&quot;aa72d8b5-1a7a-45d3-a5c8-f85bc54e51fe&quot;,&quot;02ec9e8f-532e-48cf-a4d3-91fe98fcc01d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;05689c97-f8d3-4ccf-88fe-af54ceeb1265&quot;,&quot;title&quot;:&quot;Find paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve acm paginated data&quot;,&quot;fullTitle&quot;:&quot;Acm Find paginated Should successfully retrieve acm paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body); \n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;30ade9f1-af59-4352-a6f8-7fb2ec517848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30ade9f1-af59-4352-a6f8-7fb2ec517848&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fa24b031-bb4b-4cc9-a6bd-aa2bedac15c1&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Acm Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;03d11924-528c-43b9-b287-1447219ff813&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03d11924-528c-43b9-b287-1447219ff813&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e55b2929-7c9f-4969-8269-66f43b4372ad&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.acm.create(),&#x27;post&#x27;,dummyData.acm.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body, true);\n    acmData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e43b64ec-08eb-43f4-81d1-15de0b5a2b55&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Acm Update \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e4af7d07-4bf6-4d6f-916c-213e4a7dc1f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully update acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.nModified).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;eeaad811-4dfb-4893-92cc-ca0f62aa9db6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;760523c3-33ad-4392-b56e-c41c74eecf62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update acm data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to update acm data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,dummyData.acm.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0f6f5f61-2712-4bcb-9e17-2f39193ba3ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully push items to target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully push items to target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f55cd61a-d1f2-465e-a3fc-39d961e6e59c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Items already exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Items already exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.include.members(update.success.data);\n    let responseArray = body.accessControl.read;\n    delete responseArray[responseArray.indexOf(update.success.data[0])];\n    delete responseArray[responseArray.indexOf(update.success.data[1])];\n    expect(responseArray).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d55a163-6fa3-4045-bf97-d7ace3653385&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully pull items from target&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should successfully pull items from target&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0e3b21d6-d1da-4e09-b02c-6168b190d394&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Items don&#x27;t exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAcm(body);\n    expect(body.accessControl.read).to.not.include.members(update.success.data);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e7474370-154c-499a-a598-4f2cfbb8ea7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to push items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to push items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;86433fc8-2e38-471d-b926-b2eca09901ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to pull items (Target object not found)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to pull items (Target object not found)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.notFound&amp;operation=pull`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.success.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d6a96580-70c3-4583-ab78-6687f816d787&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to perform operation on target (Body is not an array)&quot;,&quot;fullTitle&quot;:&quot;Acm Update Should fail to perform operation on target (Body is not an array)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${acmData._id}&amp;target=accessControl.read&amp;operation=push`;\nsendRequest(url.acm.update(query),&#x27;put&#x27;,update.invalid.data,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a17745db-7a33-43b6-870a-f3d7a3593d01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eeaad811-4dfb-4893-92cc-ca0f62aa9db6&quot;,&quot;760523c3-33ad-4392-b56e-c41c74eecf62&quot;,&quot;0f6f5f61-2712-4bcb-9e17-2f39193ba3ee&quot;,&quot;f55cd61a-d1f2-465e-a3fc-39d961e6e59c&quot;,&quot;8d55a163-6fa3-4045-bf97-d7ace3653385&quot;,&quot;0e3b21d6-d1da-4e09-b02c-6168b190d394&quot;,&quot;e7474370-154c-499a-a598-4f2cfbb8ea7d&quot;,&quot;86433fc8-2e38-471d-b926-b2eca09901ae&quot;,&quot;d6a96580-70c3-4583-ab78-6687f816d787&quot;,&quot;a17745db-7a33-43b6-870a-f3d7a3593d01&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:106,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;304e0004-39e1-4279-a3a2-9136131c1d94&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove acm data&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should successfully remove acm data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.acm.get.success._id}`;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body); \n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;633339a9-f9cb-4941-8a5c-06481895e3bb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove acm data (Query not provide)&quot;,&quot;fullTitle&quot;:&quot;Acm Remove Should fail to remove acm data (Query not provide)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.acm.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4cde473b-f110-462a-9554-2c59a57af939&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;633339a9-f9cb-4941-8a5c-06481895e3bb&quot;,&quot;4cde473b-f110-462a-9554-2c59a57af939&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ef7d45b0-24d5-4cb6-9c9e-e147f956f502&quot;,&quot;title&quot;:&quot;Admin&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d50d5c62-ecfe-41b5-ad45-36b4c209caf2&quot;,&quot;title&quot;:&quot;SignUp&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully signup Admin&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should successfully signup Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isAdmin(body, true);\n    dummyData.admin.get.success = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b96d89f0-a313-4134-be4c-c47fd6d36af8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (Validate error)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (Validate error)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f13ddc75-a6d0-4d47-8ebb-2f3651d57696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to signup (UserName exists)&quot;,&quot;fullTitle&quot;:&quot;Admin SignUp Should fail to signup (UserName exists)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Fails because the exact test have been done before.\nsendRequest(url.admin.signup(),&#x27;post&#x27;,dummyData.admin.signup.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.USERNAME_EXISTS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2ef011ff-c334-46de-bec2-f3f38f668546&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b96d89f0-a313-4134-be4c-c47fd6d36af8&quot;,&quot;f13ddc75-a6d0-4d47-8ebb-2f3651d57696&quot;,&quot;2ef011ff-c334-46de-bec2-f3f38f668546&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:134,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ab6405a9-67e6-4b83-aec1-ee86f11777d8&quot;,&quot;title&quot;:&quot;Login&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to login (Wrong credential)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Wrong credential)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.wrongCredential,401,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.AUT.UNAUTHORIZED_ACCESS.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cf3a78cf-dbca-46ad-8959-305d2c57795c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to login (Missing fields)&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should fail to login (Missing fields)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,dummyData.admin.signup.validationError,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d93d95f8-e85b-4322-b9e4-5cc51df17f69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully login Admin&quot;,&quot;fullTitle&quot;:&quot;Admin Login Should successfully login Admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.login(),&#x27;post&#x27;,adminSignUp,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;token&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ca9c5890-e527-40f5-b290-9d43e667e7c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf3a78cf-dbca-46ad-8959-305d2c57795c&quot;,&quot;d93d95f8-e85b-4322-b9e4-5cc51df17f69&quot;,&quot;ca9c5890-e527-40f5-b290-9d43e667e7c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:68,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;183d2336-69c7-47da-9982-97f0417b8640&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Admin Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;694ea345-21a7-4092-8a6b-0352687781ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;694ea345-21a7-4092-8a6b-0352687781ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ca3be7da-ee68-4928-9f23-afa2c89a846a&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should successfully retrieve admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.success._id),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body._id).to.equal(dummyData.admin.get.success._id);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aec0e99b-e38a-44a6-be76-0cb09a6b5c4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;fullTitle&quot;:&quot;Admin Find Should fail to retrieve admin data ( Id wrong format )&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findByIdPrivate(dummyData.admin.get.wrongIdFormat),&#x27;get&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;aa1a2557-d29e-4a56-90be-5050881e92a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aec0e99b-e38a-44a6-be76-0cb09a6b5c4c&quot;,&quot;aa1a2557-d29e-4a56-90be-5050881e92a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9bfd441-bf69-451a-8aa1-7cb23bb6be14&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Admin Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.admin.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7768d525-ba83-43c1-88b0-6708a7dd77ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7768d525-ba83-43c1-88b0-6708a7dd77ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;77bf9cd9-a6e4-4378-a9f7-3957bb0a0d95&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully update admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should successfully update admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isUpdateResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;50be9c23-7090-472b-980f-74244ef29817&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.success,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4b386741-d6ef-476c-93a3-0dfb9d40b801&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update admin data (Invalid update data)&quot;,&quot;fullTitle&quot;:&quot;Admin Update Should fail to update admin data (Invalid update data)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.update(query),&#x27;put&#x27;,dummyData.admin.update.invalidData,400,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.IMPROPER_DATA.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c1537317-d787-4cf8-b5fa-1c64008115fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;50be9c23-7090-472b-980f-74244ef29817&quot;,&quot;4b386741-d6ef-476c-93a3-0dfb9d40b801&quot;,&quot;c1537317-d787-4cf8-b5fa-1c64008115fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8975caf-d47e-48f8-995d-0ee42532d5ad&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove admin data&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should successfully remove admin data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `_id=${dummyData.admin.get.success._id}`;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.n).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bd9d481b-e88b-4ac5-a95a-88850f671907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to remove admin data. (Query not provided)&quot;,&quot;fullTitle&quot;:&quot;Admin Remove Should fail to remove admin data. (Query not provided)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = ``;\nsendRequest(url.admin.remove(query),&#x27;del&#x27;,null,400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d7e581be-1ab4-4e0f-9ce7-25733a1b9aa7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd9d481b-e88b-4ac5-a95a-88850f671907&quot;,&quot;d7e581be-1ab4-4e0f-9ce7-25733a1b9aa7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9198553-8c44-4dab-a1a5-f749eb077841&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c1b6dd7c-4587-4fc3-bb20-9bf8638d687c&quot;,&quot;title&quot;:&quot;Status&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve server&#x27;s overall status&quot;,&quot;fullTitle&quot;:&quot;Log Status Should successfully retrieve server&#x27;s overall status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.status(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;memoryUsage\&quot;, \&quot;cpuUsage\&quot;, \&quot;upTime\&quot;]);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f1750eed-9d65-40aa-b056-ad497f2c941d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1750eed-9d65-40aa-b056-ad497f2c941d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6cf30df9-fbaa-4560-a15f-388dc53cf2a6&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve log data&quot;,&quot;fullTitle&quot;:&quot;Log Find Should successfully retrieve log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.get(),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;info\&quot;]);\n    expect(body.info).to.be.an(&#x27;array&#x27;);\n    expect(body.info).length.to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4836d189-d0cb-4eb3-9bf8-08fc757c6577&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4836d189-d0cb-4eb3-9bf8-08fc757c6577&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5380b239-b8bb-4c46-9980-15a3be32d9fb&quot;,&quot;title&quot;:&quot;Flush&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully flush log data&quot;,&quot;fullTitle&quot;:&quot;Log Flush Should successfully flush log data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.log.flush(),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(body).to.be.an(&#x27;object&#x27;).that.has.all.keys([\&quot;message\&quot;]);\n    expect(body.message).to.equal(\&quot;Logs flushed\&quot;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6c9ef494-5cc9-4286-858b-970c63140436&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c9ef494-5cc9-4286-858b-970c63140436&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2cab7e34-b3ca-416d-b5a0-2ac8a8232c25&quot;,&quot;title&quot;:&quot;Schema&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7f759989-3eae-4807-996d-818f2abd3ce1&quot;,&quot;title&quot;:&quot;Count&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully return a count value&quot;,&quot;fullTitle&quot;:&quot;Schema Count Should successfully return a count value&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.count(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    expect(body).to.be.an(&#x27;object&#x27;).that.includes.all.keys(&#x27;count&#x27;);\n    expect(body.count).to.be.a(&#x27;number&#x27;);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;82666f6c-14ff-4ae5-8ff4-58f6fdb6c90b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82666f6c-14ff-4ae5-8ff4-58f6fdb6c90b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0df7e5db-382d-4175-86bd-562af2b9625a&quot;,&quot;title&quot;:&quot;Find&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve user data (public)&quot;,&quot;fullTitle&quot;:&quot;Schema Find Should successfully retrieve user data (public)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.findPaginated(query),&#x27;get&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    let sampleSchema = body.docs[0];\n    isSchema(sampleSchema);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6cab2ae9-163d-45ac-b5de-946572b0cf9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6cab2ae9-163d-45ac-b5de-946572b0cf9f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ecec28d-47ee-4f33-a85b-1af64ff3c2b1&quot;,&quot;title&quot;:&quot;Find Paginated&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully retrieve admin paginated data&quot;,&quot;fullTitle&quot;:&quot;Schema Find Paginated Should successfully retrieve admin paginated data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.schema.findPaginated(),&#x27;get&#x27;,null,200,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isPaginatedResponse(body);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;db5c509c-72df-4907-bb95-d1541f684873&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;db5c509c-72df-4907-bb95-d1541f684873&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a9cb0a78-c5a7-4e01-8160-ee7ef78253d1&quot;,&quot;title&quot;:&quot;Update&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Schema Update \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sendRequest(url.role.create(),&#x27;post&#x27;,dummyData.role.create.success,201,function (err,res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRole(body, true);\n    roleData = body;\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6584127d-f558-477e-8028-e2060fbade30&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should fail to update Schema (Schema does not exist)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Schema does not exist)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=noneExistent&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.NO_DATA_FOUND.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c0932e8c-a413-47b5-80a7-2fc598486bc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Target not defined) &quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Target not defined) &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;64890677-dd7b-4943-abca-939771d704fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should fail to update Schema (Operation not defined)&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should fail to update Schema (Operation not defined)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],400,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isErrorResponse(body);\n    expect(body.errorCode).to.equal(errorCodes.SEC.VALIDATION_ERROR.errorCode);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;425e1e70-654f-4958-95d4-4b3080932516&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully add a new role to a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully add a new role to a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;push\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;af8f5a79-70c8-49d1-8418-d7290c8a6726&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Should successfully remove a role from a method&quot;,&quot;fullTitle&quot;:&quot;Schema Update Should successfully remove a role from a method&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let target = \&quot;accessControl.read\&quot;,\n    operation = \&quot;pull\&quot;;\nlet query = `schemaName=${dummyData.acm.create.successByObject.schemaName}&amp;target=${target}&amp;operation=${operation}`;\nsendRequest(url.schema.update(query),&#x27;put&#x27;,[roleData.name],200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isSchema(body, false);\n    expect(body.accessControl.read).to.not.contain(roleData.name);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d87e380-417f-4af4-a892-83e5862e5a35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0932e8c-a413-47b5-80a7-2fc598486bc2&quot;,&quot;64890677-dd7b-4943-abca-939771d704fa&quot;,&quot;425e1e70-654f-4958-95d4-4b3080932516&quot;,&quot;af8f5a79-70c8-49d1-8418-d7290c8a6726&quot;,&quot;8d87e380-417f-4af4-a892-83e5862e5a35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:100,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ba87ba5d-8c13-4e9e-877d-74faf5ebbe53&quot;,&quot;title&quot;:&quot;Remove&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully remove Schema&quot;,&quot;fullTitle&quot;:&quot;Schema Remove Should successfully remove Schema&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let query = `schemaName=${dummyData.acm.create.successByObject.schemaName}`;\nsendRequest(url.schema.remove(query),&#x27;del&#x27;,null,200,function (err, res) {\n    let body = res.body;\n    expect(err).to.be.null;\n    isRemoveResponse(body);\n    expect(body.ok).to.be.at.least(1);\n    done();\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9ab69b1d-ade2-49e6-b60e-911050c5d8e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ab69b1d-ade2-49e6-b60e-911050c5d8e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b312b775-4b89-4efe-a7e1-7d8696bad082&quot;,&quot;title&quot;:&quot;Socket&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0a81e43b-c9bd-4540-b121-813753161eee&quot;,&quot;title&quot;:&quot;Log&quot;,&quot;fullFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/test/test.js&quot;,&quot;file&quot;:&quot;/test/test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Should successfully receive streamed request logs.&quot;,&quot;fullTitle&quot;:&quot;Socket Log Should successfully receive streamed request logs.&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1065,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let socketURL = `http://0.0.0.0:${process.env.HTTP_PORT}`;\nlet options = {\n    transports: [&#x27;websocket&#x27;],\n    &#x27;force new connection&#x27;: true\n};\n(()=&gt;{\n    let execRequests = [];\n    for(let i=0; i&lt;1; i++){\n        execRequests.push(function (callback) {\n            setTimeout(function () {\n                let deniedMethodOnObject = {\n                    service     : \&quot;Service A\&quot;,\n                        ip          : \&quot;172.16.1.41\&quot;,\n                        params      : null,\n                        path        : \&quot;http://sample/route\&quot;,\n                        query       : null,\n                        secure      : true,\n                        xhr         : false,\n                        route       : \&quot;http://sample/route\&quot;,\n                        method      : \&quot;PUT\&quot;,\n                        body        : {sampleKey : \&quot;sampleVal\&quot;},\n                        objectId    : \&quot;5cee7a0456f44a4e65b35532\&quot;,\n                        token       : \&quot;wrong_token\&quot;\n                };\n                sendRequest(url.token.validate(),&#x27;post&#x27;,deniedMethodOnObject,200,function () {\n                    callback(null);\n                });\n            },500)\n        })\n    }\n    async.waterfall(execRequests);\n})();\nlet client = socketClient.connect(socketURL, options);\nclient.on(&#x27;logs&#x27;, function(data){\n    if(data){done();}\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2abea5c9-f2ee-401d-a3a0-99e7e8d1cc16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2abea5c9-f2ee-401d-a3a0-99e7e8d1cc16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1065,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:30000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;report&quot;,&quot;reportTitle&quot;:&quot;hisab_authorization_service&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.json&quot;,&quot;htmlFile&quot;:&quot;/home/nathan/Documents/workspace/be/hisab/hisab_authorization_service/report/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>